(this["webpackJsonpreact-importer-example"]=this["webpackJsonpreact-importer-example"]||[]).push([[0],{34:function(e,t,n){e.exports=n(79)},35:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);n(35);var r,a,i,l,o,c=n(0),s=n.n(c),d=n(6),u=n.n(d),m=n(32),f=n(26),p=n.n(f),h=n(3),g=n(33),b=n(19),v=n(18);n(60),n(61);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return t||(t=e.slice(0)),e.raw=t,e}var k,B,C,O,F,j,R,I,S,M,z,N,D,K,A,L,T,q,V=h.b.section(r||(r=w(["\n  text-align: right;\n  margin-bottom: 20px;\n"]))),H=h.b.span(a||(a=w(["\n  font-weight: thin;\n  margin-left: 20px;\n  ",";\n"])),(function(e){return e.active?Object(h.a)(i||(i=w(["\n        font-weight: bold;\n      "]))):e.past?Object(h.a)(l||(l=w(["\n        font-weight: bold;\n        color: #2ecc71;\n      "]))):void 0})),_=h.b.svg(o||(o=w(["\n  margin-bottom: 3px;\n  margin-left: 20px;\n  fill: grey;\n"]))),W=function(e){var t=e.steps,n=e.currentStep;return s.a.createElement(V,{id:"csv-importer-nav-header"},t.map((function(e,r){var a=n>r,i=n===r,l=r===t.length-1;return s.a.createElement(H,{key:r,past:a,active:i},e,!l&&s.a.createElement(_,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-right",viewBox:"0 0 16 16"},s.a.createElement("path",{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"})))})))},P=h.b.div(k||(k=w(["\n  margin: 0 auto;\n  max-width: 1200px;\n"]))),G=h.b.div(B||(B=w(["\n  ","\n"])),(function(e){var t={};return e.muted&&(t.color="#7f8c8d"),e.danger&&(t.color="#e74c3c"),e.bold&&(t.fontWeight="bold"),t})),U=h.b.div(C||(C=w(["\n  animation : none;\n  animation-delay : 0;\n  animation-direction : normal;\n  animation-duration : 0;\n  animation-fill-mode : none;\n  animation-iteration-count : 1;\n  animation-name : none;\n  animation-play-state : running;\n  animation-timing-function : ease;\n  backface-visibility : visible;\n  background : 0;\n  background-attachment : scroll;\n  background-clip : border-box;\n  background-color : transparent;\n  background-image : none;\n  background-origin : padding-box;\n  background-position : 0 0;\n  background-position-x : 0;\n  background-position-y : 0;\n  background-repeat : repeat;\n  background-size : auto auto;\n  border : 0;\n  border-style : none;\n  border-width : medium;\n  border-color : inherit;\n  border-bottom : 0;\n  border-bottom-color : inherit;\n  border-bottom-left-radius : 0;\n  border-bottom-right-radius : 0;\n  border-bottom-style : none;\n  border-bottom-width : medium;\n  border-collapse : separate;\n  border-image : none;\n  border-left : 0;\n  border-left-color : inherit;\n  border-left-style : none;\n  border-left-width : medium;\n  border-radius : 0;\n  border-right : 0;\n  border-right-color : inherit;\n  border-right-style : none;\n  border-right-width : medium;\n  border-spacing : 0;\n  border-top : 0;\n  border-top-color : inherit;\n  border-top-left-radius : 0;\n  border-top-right-radius : 0;\n  border-top-style : none;\n  border-top-width : medium;\n  bottom : auto;\n  box-shadow : none;\n  box-sizing : content-box;\n  caption-side : top;\n  clear : none;\n  clip : auto;\n  color : inherit;\n  columns : auto;\n  column-count : auto;\n  column-fill : balance;\n  column-gap : normal;\n  column-rule : medium none currentColor;\n  column-rule-color : currentColor;\n  column-rule-style : none;\n  column-rule-width : none;\n  column-span : 1;\n  column-width : auto;\n  content : normal;\n  counter-increment : none;\n  counter-reset : none;\n  cursor : auto;\n  direction : ltr;\n  display : inline;\n  empty-cells : show;\n  float : none;\n  font : normal;\n  font-family : inherit;\n  font-size : 16px !important;\n  font-style : normal;\n  font-variant : normal;\n  font-weight : normal;\n  height : auto;\n  hyphens : none;\n  left : auto;\n  letter-spacing : normal;\n  line-height : normal;\n  list-style : none;\n  list-style-image : none;\n  list-style-position : outside;\n  list-style-type : disc;\n  margin : 0;\n  margin-bottom : 0;\n  margin-left : 0;\n  margin-right : 0;\n  margin-top : 0;\n  max-height : none;\n  max-width : none;\n  min-height : 0;\n  min-width : 0;\n  opacity : 1;\n  orphans : 0;\n  outline : 0;\n  outline-color : invert;\n  outline-style : none;\n  outline-width : medium;\n  overflow : visible;\n  overflow-x : visible;\n  overflow-y : visible;\n  padding : 0;\n  padding-bottom : 0;\n  padding-left : 0;\n  padding-right : 0;\n  padding-top : 0;\n  page-break-after : auto;\n  page-break-before : auto;\n  page-break-inside : auto;\n  perspective : none;\n  perspective-origin : 50% 50%;\n  position : static;\n  right : auto;\n  tab-size : 8;\n  table-layout : auto;\n  text-align : inherit;\n  text-align-last : auto;\n  text-decoration : none;\n  text-decoration-color : inherit;\n  text-decoration-line : none;\n  text-decoration-style : solid;\n  text-indent : 0;\n  text-shadow : none;\n  text-transform : none;\n  top : auto;\n  transform : none;\n  transform-style : flat;\n  transition : none;\n  transition-delay : 0s;\n  transition-duration : 0s;\n  transition-property : none;\n  transition-timing-function : ease;\n  unicode-bidi : normal;\n  vertical-align : baseline;\n  visibility : visible;\n  white-space : normal;\n  widows : 0;\n  width : auto;\n  word-spacing : normal;\n  z-index : auto;\n  all: initial;\n  all: unset;\n"]))),$=h.b.div(O||(O=w(["\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  padding: 10px;\n  border-radius: 5px;\n"]))),J=h.b.div(F||(F=w(["\n","\n"])),(function(e){return e.right?Object(h.a)(j||(j=w(["text-align: right"]))):e.center?Object(h.a)(R||(R=w(["text-align: center"]))):void 0})),Z=h.b.div(I||(I=w(["\n  ","\n"])),(function(e){return Object(h.a)(S||(S=w(["\n        margin: ",";\n      "])),e.margin)})),Q=h.b.div(M||(M=w(["\n  ","\n"])),(function(e){return Object(h.a)(z||(z=w(["\n        padding: ",";\n      "])),e.padding)})),X=h.b.table(N||(N=w(["\n  border: 1px solid #aaa;\n  width: 100%;\n  th, td {\n    border: 1px solid #aaa;\n  }\n"]))),Y=h.b.div(D||(D=w(["\n  flex-direction: row;\n  display: flex;\n"]))),ee=h.b.div(K||(K=w(["\n  ","\n"])),(function(e){var t={};return e.flex?t.flex=e.flex:t.flex=1,e.verticallyCenter&&(t.display="flex",t.alignItems="center"),e.spaceBetween&&(t.display="flex",t.justifyContent="space-between"),t})),te=h.b.button(A||(A=w(["\n  border: none;\n  padding: 10px 20px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  cursor: pointer;\n  font-weight: bold;\n  border-radius: 5px;\n\n  ","\n"])),(function(e){var t="#2980b9";return"success"===e.variant?t="green":"danger"===e.variant?t="#e74c3c":"secondary"===e.variant&&(t="#7f8c8d"),e.disabled&&(t+="bb"),e.outline?Object(h.a)(L||(L=w(["\n        border: 1px solid ",";\n        color: ",";\n      "])),t,t):Object(h.a)(T||(T=w(["\n        color: white;\n        background-color: ",";\n        border: 1px solid ",";\n      "])),t,t)})),ne=(h.b.div(q||(q=w(["\n  // Some styling here\n"]))),function(e){var t=e.setFile,n=Object(g.a)(),r=n.acceptedFiles,a=n.getRootProps,i=n.getInputProps;return Object(c.useEffect)((function(){r.length>0&&t(r[0])}),[r]),s.a.createElement($,y({},a(),{style:{cursor:"pointer",backgroundColor:"rgb(250, 250, 250)"}}),s.a.createElement(Q,{padding:"30px"},s.a.createElement("input",i()),s.a.createElement(Z,{margin:"0 0 30px 0"},s.a.createElement(G,{muted:!0},"Pick a file")),s.a.createElement(Y,null,s.a.createElement(ee,{flex:"3"},s.a.createElement(Y,null,s.a.createElement(ee,{flex:"1"},s.a.createElement("svg",{style:{marginRight:"20px"},xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"#7f8c8d",className:"bi bi-cloud-arrow-up",viewBox:"0 0 16 16"},s.a.createElement("path",{fillRule:"evenodd",d:"M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"}),s.a.createElement("path",{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"}))),s.a.createElement(ee,{flex:"6"},s.a.createElement("h5",{style:{marginBottom:"10px"}},"Drag and drop your file here"),s.a.createElement(G,{muted:!0},"Limit 20MB \u2022 CSV")))),s.a.createElement(ee,{flex:"1"},s.a.createElement(J,{right:!0},s.a.createElement(te,{variant:"secondary",outline:!0},"Browse Files"))))))}),re=function(e,t){return Math.round(e/t*100*10)/10},ae=function(e){var t,n,r=e.fieldStatistics,a=e.selectedField,i=r.total,l=null===(t=r.statistics)||void 0===t?void 0:t.counts,o=null===(n=r.statistics)||void 0===n?void 0:n.errorTypeCounts;return l&&o?s.a.createElement("div",null,a&&s.a.createElement("div",null,"Matched to ",s.a.createElement("b",null,a.label)),!a&&s.a.createElement("div",null,s.a.createElement("b",null,"No match detected")),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("svg",{style:{marginRight:"10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#7f8c8d",className:"bi bi-info-circle-fill",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})),s.a.createElement("b",null,re(i-l.isNull,i),"%")," of your rows have a value for this column"),0===o.total&&s.a.createElement("div",null,s.a.createElement("svg",{style:{marginRight:"10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2ecc71",className:"bi bi-check-lg",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z"})),"All rows pass validation for this column."),o.total>0&&s.a.createElement("div",null,s.a.createElement("svg",{style:{marginRight:"10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#f39c12",className:"bi bi-exclamation-diamond-fill",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})),o.total/i<.02&&s.a.createElement("span",null,s.a.createElement("b",null,o.total)," rows fail validation (repair on next step)"),o.total/i>=.02&&s.a.createElement("span",null,s.a.createElement("b",null,re(o.total,i),"%")," of rows fail validation (repair on next step)"))):s.a.createElement("div",null)},ie=function(e){var t=e.header,n=e.examples,r=e.setHeader,a=e.selectedHeader,i=e.options;return s.a.createElement("div",null,s.a.createElement(Z,{margin:"20px 0"},s.a.createElement(Y,null,s.a.createElement(ee,{verticallyCenter:!0,spaceBetween:!0},s.a.createElement(Z,{margin:"0 10px"},t.slice(0,30)),s.a.createElement(Q,{padding:"0 20px"},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-right",viewBox:"0 0 16 16"},s.a.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})))),s.a.createElement(ee,null,s.a.createElement(b.a,{isClearable:!0,isSearchable:!0,value:a,options:i,onChange:r})))),s.a.createElement(X,null,s.a.createElement("tbody",null,n.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{style:{backgroundColor:"#ecf0f1",textAlign:"center",width:"40px"}},t),s.a.createElement("td",{style:{padding:"10px 20px"}},e||s.a.createElement("i",null,"No Data")))})))))},le=function(e){var t=e.options,n=e.header,r=e.examples,a=e.headerMapping,i=e.setHeaderMapping,l=e.fieldStatistics,o=null;return o=a.confirmed?s.a.createElement(Y,null,s.a.createElement(ee,null,s.a.createElement(Y,null,s.a.createElement(ee,{verticallyCenter:!0,spaceBetween:!0},s.a.createElement(Z,{margin:"0 10px"},n.slice(0,30)),s.a.createElement(Q,{padding:"0 20px"},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-right",viewBox:"0 0 16 16"},s.a.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})))),s.a.createElement(ee,null,s.a.createElement(b.a,{isDisabled:!0,value:a.selectedField})))),s.a.createElement(ee,{spaceBetween:!0,verticallyCenter:!0},s.a.createElement("div",null,s.a.createElement("svg",{style:{margin:"0 10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2ecc71",className:"bi bi-check-lg",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z"})),"Confirmed"),s.a.createElement(te,{onClick:function(){i(y({},a,{confirmed:!1}))}},"Edit"))):a.ignored?s.a.createElement(Y,null,s.a.createElement(ee,{verticallyCenter:!0},s.a.createElement(Z,{margin:"0 10px"},n)),s.a.createElement(ee,{spaceBetween:!0,verticallyCenter:!0},s.a.createElement("div",null,s.a.createElement("svg",{style:{margin:"0 10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-eye-slash-fill",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"}),s.a.createElement("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"})),"Ignored"),s.a.createElement(te,{onClick:function(){i(y({},a,{selectedField:null,ignored:!1,name:null}))}},"Edit"))):s.a.createElement(Y,null,s.a.createElement(ee,null,s.a.createElement(ie,{options:t,header:n,examples:r,selectedHeader:a.selectedField,setHeader:function(e){i(y({},a,{selectedField:e,ignored:!1,name:n}))}})),s.a.createElement(ee,null,s.a.createElement(Q,{padding:"20px 0 0 20px",style:{display:"flex",flexDirection:"column",height:"90%",justifyContent:"space-between"}},s.a.createElement("div",null,a.selectedField&&s.a.createElement(ae,{selectedField:a.selectedField,fieldStatistics:l})),s.a.createElement("div",null,a.selectedField&&s.a.createElement(te,{style:{marginRight:"10px"},variant:"success",onClick:function(){i(y({},a,{confirmed:!0}))}},"Confirm mapping"),s.a.createElement(te,{variant:"secondary",outline:!0,onClick:function(){i(y({},a,{ignored:!0}))}},"Ignore this column"))))),s.a.createElement(Z,{margin:"20px 0"},s.a.createElement($,null,o))},oe=function(e){var t=e.parsed,n=e.fields,r=e.statistics,a=e.headerMappings,i=e.setHeaderMappings,l=e.missingRequiredFields,o=e.onComplete,c=e.restart,d=t.data,u=n.map((function(e){return{label:e.label,value:e.key}})),m=l.length>0;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h5",null,t.data.length-1," Rows Imported")),d[0].map((function(e,t){var n,l=d.slice(1,4).map((function(e){return e[t]})),o=a[t]||{},c={total:r.total,statistics:r.statisticsByFieldKey[null===(n=o.selectedField)||void 0===n?void 0:n.value]};return s.a.createElement(le,{key:t,columnIndex:t,header:e,examples:l,headerMapping:o,setHeaderMapping:function(e){var n=y({},a);e.columnIndex=t,n[t]=e,i(n)},options:u,fieldStatistics:c})})),s.a.createElement(Z,{margin:"20px 0"},s.a.createElement(J,{right:!0},m&&l.map((function(e){return s.a.createElement("div",null,s.a.createElement(G,{style:{marginBottom:"15px"},danger:!0,bold:!0},"Missing mapping for ",e.label,s.a.createElement("svg",{style:{marginLeft:"10px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#e74c3c",className:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},s.a.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}))))}))),s.a.createElement(Y,null,s.a.createElement(ee,null,s.a.createElement(te,{onClick:c,outline:!0},"Back")),s.a.createElement(ee,null,s.a.createElement(J,{right:!0},s.a.createElement(te,{disabled:m,onClick:o,variant:"primary"},"Review"))))))},ce=function(e){return!function(e){return null===e||void 0===e}(e)},se=function(e){return e.filter((function(e){return Object.keys(e).filter((function(e){return"rowIndex"!==e})).length>0}))},de=function(e,t){return function(e){return e.forEach((function(e){delete e.rowIndex})),e}(function(e,t){var n=t.rowIndexesWithErrors();return e=e.filter((function(e){return!n.has(e.rowIndex)})),se(e)}(se(e),t))},ue=function(e){var t=e.formattedData,n=e.fields,r=e.onSubmit,a=e.onBack,i=e.validationResult,l=e.setRowData,o=Object(c.useState)(null),d=o[0],u=o[1],m=Object(c.useState)(null)[1],f=Object(c.useRef)(i);f.current=i,Object(c.useEffect)((function(){setTimeout((function(){null===d||void 0===d||d.redrawRows()}),0)}),[i]);var p=Object(c.useState)(!1),h=p[0],g=p[1],b=function(e){return ce(e.column.colDef.field)&&ce(e.data.rowIndex)&&f.current.hasError(e.column.colDef.field,e.data.rowIndex)?{color:"rgba(192, 57, 43, 1.0)",backgroundColor:"rgba(231, 76, 60, 0.3)",border:"1px solid rgba(192, 57, 43, 1.0)"}:null};return s.a.createElement("div",null,s.a.createElement(Z,{margin:"20px 0"},s.a.createElement("input",{checked:h,onChange:function(e){!function(e){var n;if(g(e),e){var r=i.rowIndexesWithErrors();n=t.filter((function(e,t){return r.has(t)}))}else n=t;d.setRowData(n)}(e.target.checked)},type:"checkbox",name:"row-errors",id:"row-errors"}),s.a.createElement("label",{style:{marginLeft:"10px"},htmlFor:"row-errors"},"Only show rows with errors")),s.a.createElement("div",{style:{height:500,width:"100%"},className:"ag-theme-alpine"},s.a.createElement(v.AgGridReact,{onCellValueChanged:function(e){l(e.data,e.rowIndex)},rowData:t,tooltipShowDelay:0,defaultColDef:{flex:1,minWidth:100,editable:!0},onGridReady:function(e){u(e.api),m(e.columnApi)}},n.map((function(e){return s.a.createElement(v.AgGridColumn,{resizable:!0,cellStyle:b,key:e.key,headerName:e.label,tooltipValueGetter:function(e){var t=e.rowIndex,n=e.colDef.field;if(f.current.hasError(n,t))return f.current.getErrors(n,t).map((function(e){return e.message})).join(", ")},field:e.key})})))),s.a.createElement(Z,{margin:"20px 0"},s.a.createElement(Y,null,s.a.createElement(ee,null,a&&s.a.createElement(te,{onClick:a,outline:!0},"Back")),s.a.createElement(ee,null,s.a.createElement(J,{right:!0},se(t).length>0&&s.a.createElement(te,{onClick:r},i.hasErrors()&&"Upload Rows Without Errors",!i.hasErrors()&&"Upload"))))))},me=Object(c.createContext)({colors:{success:"#2ecc71",primary:"#3498db",warning:"#f39c12",danger:"#e74c3c"}}),fe=function(){function e(e){this.definition=e}return e.prototype.isValid=function(e,t){throw new Error("Not Implemented")},e.buildFromDefinition=function(e){var t={regex_matches:ge,required:be,unique:he,is_integer:pe};if(!(e.validate in t))throw new Error("Missing validator for "+e.validate);return new(0,t[e.validate])(e)},e}(),pe=function(e){function t(){return e.apply(this,arguments)||this}return E(t,e),t.prototype.isValid=function(e){return{valid:!isNaN(e)&&null!==e&&void 0!==e,message:this.definition.error||"This is not a valid number",errorType:"is_integer"}},t}(fe),he=function(e){function t(t){var n;return(n=e.call(this,t)||this).seen={},n}return E(t,e),t.prototype.isValid=function(e){return e in this.seen?{valid:!1,message:this.definition.error||"This value is not unique",errorType:"unique"}:(this.seen[e]=!0,{valid:!0})},t}(fe);var ge=function(e){function t(t){var n;return"object"===typeof(n=e.call(this,t)||this).definition.regex?n.regexp=n.definition.regex:n.regexp=new RegExp(n.definition.regex.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")),n.seen={},n}return E(t,e),t.prototype.isValid=function(e){return this.regexp.test(e)?{valid:!0}:{valid:!1,message:"This value is invalid",errorType:"regex"}},t}(fe),be=function(e){function t(){return e.apply(this,arguments)||this}return E(t,e),t.prototype.isValid=function(e){return e?{valid:!0}:{valid:!1,message:this.definition.error||"This value is required",errorType:"required"}},t}(fe),ve=function(){function e(){this.errorsByFieldKeyByRowIndex={}}var t=e.prototype;return t.hasErrors=function(){var e=this;return Object.keys(this.errorsByFieldKeyByRowIndex).filter((function(t){return Object.keys(e.errorsByFieldKeyByRowIndex[t]).length>0})).length>0},t.rowIndexesWithErrors=function(){var e=this,t=[];return Object.keys(this.errorsByFieldKeyByRowIndex).forEach((function(n){var r=Object.keys(e.errorsByFieldKeyByRowIndex[n]);t=t.concat(r.map((function(e){return parseInt(e,10)})))})),new Set(t)},t.addError=function(e,t,n){e=e.toString(),t=t.toString(),e in this.errorsByFieldKeyByRowIndex||(this.errorsByFieldKeyByRowIndex[e]={}),t in this.errorsByFieldKeyByRowIndex[e]||(this.errorsByFieldKeyByRowIndex[e][t]=[]),this.errorsByFieldKeyByRowIndex[e][t].push(n)},t.hasError=function(e,t){return e=e.toString(),t=t.toString(),e in this.errorsByFieldKeyByRowIndex&&t in this.errorsByFieldKeyByRowIndex[e]},t.getErrors=function(e,t){return e=e.toString(),t=t.toString(),this.errorsByFieldKeyByRowIndex[e][t]},e}(),ye=function(e,t,n){var r={};return Object.keys(t).map((function(e){return t[e]})).forEach((function(t){if(t.selectedField){var a=t.selectedField.value;r[a]=function(e,t,n){var r={total:0},a={isNull:0};return t.forEach((function(t){t[e]||(a.isNull+=1)})),Object.keys(n).forEach((function(e){var t=n[e];t&&t.length>0&&(r.total+=1),t.forEach((function(e){e.errorType in r?r[e.errorType]+=1:r[e.errorType]=1}))})),{errorTypeCounts:r,counts:a}}(a,e,n.errorsByFieldKeyByRowIndex[a]||{})}})),{statisticsByFieldKey:r,total:e.length}},Ee=function(e){var t=e.onComplete,n=e.fields,r=Object(c.useState)(0),a=r[0],i=r[1],l=Object(c.useState)(null),o=l[0],d=l[1],u=Object(c.useState)([]),m=u[0],f=u[1],h=Object(c.useState)({statisticsByFieldKey:{},total:null}),g=h[0],b=h[1],v=Object(c.useState)({}),y=v[0],E=v[1],x=Object(c.useState)(new ve),w=x[0],k=x[1];Object(c.useEffect)((function(){if(o&&o.data){var e=function(e,t){for(var n=[],r=function(r){var a={},i=t[r];Object.keys(e).forEach((function(t){var n=e[t],r=n.columnIndex;n.selectedField&&(a[n.selectedField.value]=i[r])})),a.rowIndex=r-1,n.push(a)},a=1;a<t.length;a++)r(a);return n}(y,o.data);f(e)}}),[y]),Object(c.useEffect)((function(){if(m.length>0){var e=function(e,t){var n={};t.forEach((function(e){n[e.key]=[],e.validators&&e.validators.forEach((function(t){n[e.key].push(fe.buildFromDefinition(t))}))}));var r=new ve;return t.forEach((function(t){e.forEach((function(e,a){if(t.key in e){var i=e[t.key];n[t.key].forEach((function(e){var n=e.isValid(i);n.valid||r.addError(t.key,a,n)}))}}))})),r}(m,n);k(e);var t=ye(m,y,e);b(t)}}),[m]);for(var B=Object.keys(y).map((function(e){return y[e]})).filter((function(e){return!e.ignored&&e.selectedField})).map((function(e){return e.selectedField.value})),C=n.filter((function(e){return B.indexOf(e.key)<0})),O=[],F=0;F<100;F++)O.push({rowIndex:F});var j=Object.keys(y).map((function(e){return y[e]})).filter((function(e){return e.confirmed})).map((function(e){return e.selectedField.value})),R=n.filter((function(e){return j.indexOf(e.key)>=0})),I=n.filter((function(e){return!!((t=e).validators&&t.validators.length>0)&&!!t.validators.find((function(e){return"required"===e.validate}));var t})).filter((function(e){return-1===R.map((function(e){return e.key})).indexOf(e.key)}));return s.a.createElement(me.Provider,null,s.a.createElement(U,null,s.a.createElement(P,null,s.a.createElement(W,{steps:["Upload","Match","Review","Complete"],currentStep:a}),0===a&&s.a.createElement("div",null,s.a.createElement(ne,{setFile:function(e){p.a.parse(e,{complete:function(e){d(e),E(function(e,t){var n={};return t.forEach((function(t,r){var a=e.find((function(e){return e.key.toLowerCase().replace("_","").replace(" ","")===t.toLowerCase().replace("_","").replace(" ","")}));a&&(n[r]={columnIndex:r,name:t,selectedField:{value:a.key,label:a.label}})})),n}(n,e.data[0])),i(1)}})}}),s.a.createElement(Z,{margin:"40px 0 10px 0"},s.a.createElement("h6",null,"Or just manually enter your data")),s.a.createElement(ue,{statistics:g,formattedData:m.length>0?m:O,fields:n,headerMappings:y,validationResult:w,onSubmit:function(){t(de(m,w))},setRowData:function(e,t){var n=[].concat(O);n[t]=e,f(n)}})),1===a&&s.a.createElement(oe,{statistics:g,parsed:o,fields:C,headerMappings:y,missingRequiredFields:I,setHeaderMappings:E,restart:function(){i(0),d(null),f([]),b({statisticsByFieldKey:{},total:null}),E({}),k(new ve)},onComplete:function(){i(2)}}),2===a&&s.a.createElement(ue,{statistics:g,formattedData:m,fields:R,headerMappings:y,validationResult:w,onBack:function(){i(1)},onSubmit:function(){t(de(m,w))},setRowData:function(e,t){var n=[].concat(m);n[t]=e,f(n)}}))))},xe=n(30),we=(n(77),n(78),function(){var e=Object(c.useState)(null),t=Object(m.a)(e,2),n=t[0],r=t[1];return s.a.createElement("div",{style:{marginTop:"50px",marginBottom:"50px"}},s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"main"},"React Importer"),s.a.createElement("div",{className:"subtext",style:{fontFamily:"Karla",fontWeight:"thin",fontSize:"1.5em"}},"A Modern CSV Importer in React")),s.a.createElement(Ee,{fields:[{label:"Name",key:"name",validators:[{validate:"required"}]},{label:"Email",key:"email",validators:[{validate:"required"},{validate:"unique",error:"This email is not unique"},{validate:"regex_matches",regex:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}]},{label:"Phone Number",key:"phone_number",validators:[{validate:"required"}]},{label:"Street",key:"street"},{label:"City",key:"city"},{label:"State",key:"state"}],onComplete:function(e){r(e)}}),n&&s.a.createElement("div",{style:{margin:"0 auto",maxWidth:"1200px"}},s.a.createElement("h4",null,"Output"),s.a.createElement(xe.a,{mode:"code",navigationBar:!1,statusBar:!1,mainMenuBar:!1,value:n,onChange:function(e){return r(e)}})))});u.a.render(s.a.createElement(we,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.4936c62d.chunk.js.map