{"version":3,"sources":["../../src/components/Header.jsx","../../src/components/common.jsx","../../src/components/FileUploader.jsx","../../src/components/HeaderMapperRow.jsx","../../src/components/HeaderMapper.jsx","../../src/utils/index.js","../../src/components/DataEditor.jsx","../../src/components/Completed.jsx","../../src/utils/functional.js","../../src/validators/index.js","../../src/transformers/utils.js","../../src/transformers/index.js","../../src/utils/timing.js","../../src/themes.js","../../src/index.js","App.js","index.js"],"names":["TextEnd","styled","section","BreadcrumbItem","span","props","active","css","past","theme","colors","success","Aligned","svg","Header","steps","currentStep","React","id","map","step","index","last","length","key","xmlns","width","height","fill","className","viewBox","fillRule","d","Container","div","TextStyled","styles","muted","secondary","danger","bold","Root","Card","Align","right","center","Margin","margin","Padded","padding","Table","table","Row","Col","customCss","flex","verticallyCenter","spaceBetween","Button","button","color","primary","variant","warning","disabled","outline","rotate","keyframes","FileUploader","circle","radius","Math","PI","inverseProgress","progress","setFile","useDropzone","acceptedFiles","getRootProps","getInputProps","isDragAccept","useEffect","backgroundColor","useTheme","style","cursor","marginRight","marginBottom","percentage","a","b","round","MappingStatistics","fieldStatistics","selectedField","total","counts","statistics","errorTypeCounts","label","isNull","HeaderMapperSelection","header","examples","setHeader","selectedHeader","options","slice","Select","isClearable","isSearchable","value","onChange","e","idx","textAlign","HeaderMapperRow","headerMapping","setHeaderMapping","block","confirmed","isDisabled","onClick","ignored","name","display","flexDirection","justifyContent","HeaderMapper","parsed","fields","headerMappings","setHeaderMappings","missingRequiredFields","onComplete","restart","data","f","hasMissingRequiredFields","columnIndex","statisticsByFieldKey","newMappings","marginLeft","isPresent","undefined","isUndefinedOrNull","formatData","output","rowIndex","item","row","Object","keys","forEach","k","push","filterEmptyRows","formattedData","filter","fieldIsRequired","field","validators","find","v","validate","buildFinalData","validationResult","removeTemporaryKeys","filterInvalidRows","rowIndexesWithErrors","has","isObject","Array","isArray","DataEditor","onSubmit","onBack","setRowData","useState","gridApi","setGridApi","setGridColumnApi","validationRef","useRef","current","setTimeout","redrawRows","onlyShowErrors","_setOnlyShowErrors","computeCellStyle","params","column","colDef","hasError","border","hasData","hasErrors","errorsByFieldKeyByRowIndex","checked","newValue","newRowData","_","setOnlyShowErrors","target","type","htmlFor","fontWeight","alignItems","class","AgGridReact","onCellValueChanged","rowData","tooltipShowDelay","defaultColDef","minWidth","editable","onGridReady","api","columnApi","AgGridColumn","resizable","cellStyle","headerName","tooltipValueGetter","columnName","getErrors","message","join","Failed","position","top","bottom","left","fontSize","Uploading","pending","hex","result","exec","r","parseInt","g","hexToRgb","CircularProgressbarWithChildren","strokeWidth","buildStyles","pathColor","SuccessIcon","Completed","failed","collection","indexOf","eachWithObject","callback","obj","values","Validator","constructor","definition","this","isValid","fieldValue","Error","mapping","regex_matches","RegexValidator","required","RequiredValidator","unique","UniqueValidator","includes","IncludesValidator","multi_includes","MultiIncludesValidator","is_integer","IntegerValidator","custom","CustomValidator","FoundValidator","delimiter","split","some","trim","valid","error","errorType","validateFn","isNaN","seen","regex","regexp","RegExp","replace","test","ValidationResult","fieldKey","allRowIndexes","rowIndexes","concat","Set","addError","toString","computeStatistics","computeStatisticsForField","errorsByRowIndex","errors","STATE_TO_CODES","Pipeline","transform","Transformer","parse","phone_number","PhoneNumberTransformer","postal_code","PostalCodeTransformer","state_code","StateCodeTransformer","strip","StripTransformer","CustomTransformer","transformer","transformFn","states","s2c","toLowerCase","delay","ms","Promise","resolve","THEME_DEFAULT","info","light","dark","THEME_SIGNAL","THEME_FRESCA","buildInitialState","inject","computeMetadata","newValidationResult","applyValidation","validatorsByFieldKey","validatorDefinition","buildFromDefinition","reducer","state","action","transformedFormattedData","applyTransformations","newData","pipelineByFieldKey","transformers","transformerDefinition","pipeline","payload","automaticHeaderMappings","buildSuggestedHeaderMappings","headers","foundField","newFormattedData","copy","Importer","useReducer","dispatch","i","usedFilters","h","unselectedFields","selectedFields","finalSelectedFields","submitWrapper","finalTheme","mergeDeep","sources","source","shift","assign","console","log","ThemeProvider","file","Papa","skipEmptyLines","complete","newParsed","newHeaderMappings","ALL_THEMES","ThemeCard","_ref","createElement","App","_useState","_useState2","_slicedToArray","ready","setReady","_useState3","_useState4","currentTheme","setCurrentTheme","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","onProgress","wrap","_context","prev","next","stop","_x","_x2","apply","arguments","href","_objectSpread","maxWidth","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8abb00af.chunk.js","sourcesContent":["import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TextEnd = styled.section`\n  text-align: right;\n  margin-bottom: 20px;\n`;\n\nconst BreadcrumbItem = styled.span`\n  font-weight: thin;\n  margin-left: 20px;\n  ${props => {\n    if (props.active) {\n      return css`\n        font-weight: bold;\n      `\n    }\n\n    if (props.past) {\n      return css`\n        font-weight: bold;\n        color: ${props => props.theme.colors.success};\n      `\n    }\n  }};\n`\n\nconst Aligned = styled.svg`\n  margin-left: 20px;\n  fill: grey;\n`\n\nconst Header = ({ steps, currentStep }) => {\n  return (\n    <TextEnd id=\"csv-importer-nav-header\">\n      { steps.map((step, index) => {\n        const past = currentStep > index;\n        const active = currentStep === index;\n        const last = index === steps.length - 1;\n        return (\n          <BreadcrumbItem key={index} past={past} active={active}>\n            {step}\n            {!last && (\n              <Aligned xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" fill=\"currentColor\" className=\"bi bi-chevron-right\" viewBox=\"0 0 16 16\">\n                <path fillRule=\"evenodd\" d=\"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\" />\n              </Aligned>\n            )}\n          </BreadcrumbItem>\n        );\n      }) }\n    </TextEnd>\n  );\n};\n\nexport default Header;\n","import styled, { css, keyframes } from 'styled-components';\n\nexport const Container = styled.div`\n  margin: 0 auto;\n  max-width: 1200px;\n`\n\nexport const TextStyled = styled.div`\n  ${props => {\n    let styles = {};\n    if (props.muted) {\n      styles['color'] = props.theme.colors.secondary;\n    }\n    if (props.danger) {\n      styles['color'] = props.theme.colors.danger;\n    }\n    if (props.bold) {\n      styles['fontWeight'] = \"bold\";\n    }\n    return styles\n  }}\n`\nexport const Root = styled.div`\n  animation : none;\n  animation-delay : 0;\n  animation-direction : normal;\n  animation-duration : 0;\n  animation-fill-mode : none;\n  animation-iteration-count : 1;\n  animation-name : none;\n  animation-play-state : running;\n  animation-timing-function : ease;\n  backface-visibility : visible;\n  background : 0;\n  background-attachment : scroll;\n  background-clip : border-box;\n  background-color : transparent;\n  background-image : none;\n  background-origin : padding-box;\n  background-position : 0 0;\n  background-position-x : 0;\n  background-position-y : 0;\n  background-repeat : repeat;\n  background-size : auto auto;\n  border : 0;\n  border-style : none;\n  border-width : medium;\n  border-color : inherit;\n  border-bottom : 0;\n  border-bottom-color : inherit;\n  border-bottom-left-radius : 0;\n  border-bottom-right-radius : 0;\n  border-bottom-style : none;\n  border-bottom-width : medium;\n  border-collapse : separate;\n  border-image : none;\n  border-left : 0;\n  border-left-color : inherit;\n  border-left-style : none;\n  border-left-width : medium;\n  border-radius : 0;\n  border-right : 0;\n  border-right-color : inherit;\n  border-right-style : none;\n  border-right-width : medium;\n  border-spacing : 0;\n  border-top : 0;\n  border-top-color : inherit;\n  border-top-left-radius : 0;\n  border-top-right-radius : 0;\n  border-top-style : none;\n  border-top-width : medium;\n  bottom : auto;\n  box-shadow : none;\n  box-sizing : content-box;\n  caption-side : top;\n  clear : none;\n  clip : auto;\n  color : inherit;\n  columns : auto;\n  column-count : auto;\n  column-fill : balance;\n  column-gap : normal;\n  column-rule : medium none currentColor;\n  column-rule-color : currentColor;\n  column-rule-style : none;\n  column-rule-width : none;\n  column-span : 1;\n  column-width : auto;\n  content : normal;\n  counter-increment : none;\n  counter-reset : none;\n  cursor : auto;\n  direction : ltr;\n  display : inline;\n  empty-cells : show;\n  float : none;\n  font : normal;\n  font-family : inherit;\n  font-size : 16px !important;\n  font-style : normal;\n  font-variant : normal;\n  font-weight : normal;\n  height : auto;\n  hyphens : none;\n  left : auto;\n  letter-spacing : normal;\n  line-height : normal;\n  list-style : none;\n  list-style-image : none;\n  list-style-position : outside;\n  list-style-type : disc;\n  margin : 0;\n  margin-bottom : 0;\n  margin-left : 0;\n  margin-right : 0;\n  margin-top : 0;\n  max-height : none;\n  max-width : none;\n  min-height : 0;\n  min-width : 0;\n  opacity : 1;\n  orphans : 0;\n  outline : 0;\n  outline-color : invert;\n  outline-style : none;\n  outline-width : medium;\n  overflow : visible;\n  overflow-x : visible;\n  overflow-y : visible;\n  padding : 0;\n  padding-bottom : 0;\n  padding-left : 0;\n  padding-right : 0;\n  padding-top : 0;\n  page-break-after : auto;\n  page-break-before : auto;\n  page-break-inside : auto;\n  perspective : none;\n  perspective-origin : 50% 50%;\n  position : static;\n  right : auto;\n  tab-size : 8;\n  table-layout : auto;\n  text-align : inherit;\n  text-align-last : auto;\n  text-decoration : none;\n  text-decoration-color : inherit;\n  text-decoration-line : none;\n  text-decoration-style : solid;\n  text-indent : 0;\n  text-shadow : none;\n  text-transform : none;\n  top : auto;\n  transform : none;\n  transform-style : flat;\n  transition : none;\n  transition-delay : 0s;\n  transition-duration : 0s;\n  transition-property : none;\n  transition-timing-function : ease;\n  unicode-bidi : normal;\n  vertical-align : baseline;\n  visibility : visible;\n  white-space : normal;\n  widows : 0;\n  width : auto;\n  word-spacing : normal;\n  z-index : auto;\n  all: initial;\n  all: unset;\n`\n\nexport const Card = styled.div`\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  padding: 10px;\n  border-radius: 5px;\n`\n\nexport const Align = styled.div`\n${\n  props => {\n    if (props.right) {\n      return css`text-align: right`\n    } else if (props.center) {\n      return css`text-align: center`\n    }\n  }\n}\n`\n\nexport const Margin = styled.div`\n  ${\n    props => {\n      return css`\n        margin: ${props.margin};\n      `;\n    }\n  }\n`\n\nexport const Padded = styled.div`\n  ${\n    props => {\n      return css`\n        padding: ${props.padding};\n      `;\n    }\n  }\n`\n\nexport const Table = styled.table`\n  border: 1px solid #aaa;\n  width: 100%;\n  th, td {\n    border: 1px solid #aaa;\n  }\n`\n\nexport const Row = styled.div`\n  flex-direction: row;\n  display: flex;\n`\n\nexport const Col = styled.div`\n  ${props => {\n    let customCss = {};\n    if (props.flex) {\n      customCss['flex'] = props.flex;\n    } else {\n      customCss['flex'] = 1;\n    }\n    if (props.verticallyCenter) {\n      customCss['display'] = 'flex';\n      customCss['alignItems'] = 'center';\n    }\n    if (props.spaceBetween) {\n      customCss['display'] = 'flex';\n      customCss['justifyContent'] = 'space-between';\n    }\n    return customCss;\n  }}\n`\n\nexport const Button = styled.button`\n  border: none;\n  padding: 10px 20px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  cursor: pointer;\n  font-weight: bold;\n  border-radius: 5px;\n\n  ${props => {\n    let color = props.theme.colors.primary;\n    if (props.variant === 'success') {\n      color = props.theme.colors.success;\n    } else if (props.variant === 'danger') {\n      color = props.theme.colors.danger;\n    } else if (props.variant === \"secondary\") {\n      color = props.theme.colors.secondary;\n    } else if (props.variant === \"warning\") {\n      color = props.theme.colors.warning;\n    }\n\n    if (props.disabled) {\n      color += 'bb';\n    }\n    if (props.outline) {\n      return css`\n        border: 1px solid ${color};\n        color: ${color};\n      `;\n    } else {\n      return css`\n        color: white;\n        background-color: ${color};\n        border: 1px solid ${color};\n      `;\n    }\n  }}\n`\nconst rotate = keyframes`\n  from {\n    stroke-dashoffset: 360;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n`\n\nexport const PendingProgress = styled.circle`\n  ${props => {\n    let styles = {};\n    styles['r'] = props.radius || 45;\n    styles['stroke-dasharray'] = styles['r'] * 2 * Math.PI;\n    const inverseProgress = (1 - (props.progress / 100))\n    styles['stroke-dashoffset'] = (inverseProgress * styles['stroke-dasharray']) || (styles['stroke-dasharray']);\n    return styles\n  }}\n\n  stroke: ${props => props.theme.colors.success};\n  transition: all 1s ease;\n\n  fill: none;\n  stroke-width: 5px;\n  stroke-linecap: round;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n  cx: 50;\n  cy: 50;\n`\n\nexport const CircleProgress = styled.circle`\n  stroke-dasharray: 360;\n  stroke-dashoffset: 0;\n  stroke: ${props => props.theme.colors.success};\n  animation: ${rotate} 1s ease-out;\n\n  fill: none;\n  stroke-width: 5px;\n  stroke-linecap: round;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n  cx: 50;\n  cy: 50;\n  r: 45;\n`","import React, { useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport styled, { useTheme } from 'styled-components'\nimport { Button, Row, Col, Align, Card, Padded, Margin, TextStyled } from './common'\n\n\nconst FileUploader = ({ setFile }) => {\n  const {acceptedFiles, getRootProps, getInputProps, isDragAccept} = useDropzone();\n\n  useEffect(() => {\n    if (acceptedFiles.length > 0) {\n      setFile(acceptedFiles[0])\n    }\n  }, [acceptedFiles]);\n\n  const backgroundColor = isDragAccept ? \"rgb(236, 240, 241)\" : \"rgb(250, 250, 250)\";\n  const theme = useTheme();\n  return (\n    <Card {...getRootProps()} style={{cursor: 'pointer', backgroundColor: backgroundColor}}>\n      <Padded padding=\"30px\">\n        <input {...getInputProps()} />\n        <Margin margin=\"0 0 30px 0\">\n          <TextStyled muted>\n          Pick a file\n          </TextStyled>\n        </Margin>\n        <Row>\n          <Col flex=\"3\">\n            <Row>\n              <Col flex=\"1\">\n                <svg style={{marginRight: \"20px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" fill={theme.colors.secondary} className=\"bi bi-cloud-arrow-up\" viewBox=\"0 0 16 16\">\n                  <path fillRule=\"evenodd\" d=\"M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z\" />\n                  <path d=\"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z\" />\n                </svg>\n              </Col>\n              <Col flex=\"6\">\n                <h5 style={{marginBottom: \"10px\"}}>Drag and drop your file here</h5>\n                <TextStyled muted>Limit 20MB â€¢ CSV</TextStyled>\n              </Col>\n            </Row>\n\n          </Col>\n          <Col flex=\"1\">\n            <Align right>\n              <Button variant=\"secondary\" outline>Browse Files</Button>\n            </Align>\n          </Col>\n        </Row>\n      </Padded>\n    </Card>\n  );\n};\n\nexport default FileUploader;\n","import React from 'react';\nimport Select from 'react-select';\nimport { Card, Margin, Button, Row, Col, Padded, Table } from './common'\nimport { useTheme } from 'styled-components'\n\n\nconst percentage = (a, b) => {\n  return Math.round((a / b * 100) * 10) / 10;\n}\n\nconst MappingStatistics = ({ fieldStatistics, selectedField, }) => {\n  const total = fieldStatistics.total;\n  const counts = fieldStatistics.statistics?.counts;\n  const errorTypeCounts = fieldStatistics.statistics?.errorTypeCounts;\n  if (!counts || !errorTypeCounts) {\n    return <div></div>\n  }\n  const theme = useTheme();\n  return (\n    <div>\n      {selectedField && <div>Matched to <b>{selectedField.label}</b></div>}\n      {!selectedField && <div><b>No match detected</b></div>}\n      <br />\n      <div>\n        <svg style={{ marginRight: \"10px\" }} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill={theme.colors.warning} className=\"bi bi-info-circle-fill\" viewBox=\"0 0 16 16\">\n          <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\" />\n        </svg>\n\n        <b>{percentage(total - counts.isNull, total)}%</b> of your rows have a value for this column\n      </div>\n      {errorTypeCounts.total === 0 && (\n        <div>\n          <svg style={{marginRight: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill={theme.colors.success} className=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n            <path d=\"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z\" />\n          </svg>\n\n          All rows pass validation for this column.\n        </div>\n      )}\n      {errorTypeCounts.total > 0 && (\n        <div>\n          <svg style={{marginRight: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill={theme.colors.danger} className=\"bi bi-exclamation-diamond-fill\" viewBox=\"0 0 16 16\">\n            <path d=\"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\n          </svg>\n\n          {(errorTypeCounts.total / total < 0.02) && <span><b>{errorTypeCounts.total}</b> rows fail validation (repair on next step)</span>}\n          {(errorTypeCounts.total / total >= 0.02) && <span><b>{percentage(errorTypeCounts.total, total)}%</b> of rows fail validation (repair on next step)</span>}\n        </div>\n      )}\n    </div>\n  );\n}\nconst HeaderMapperSelection = ({header, examples, setHeader, selectedHeader, options}) => {\n  return (\n    <div>\n      <Margin margin=\"20px 0\">\n        <Row>\n          <Col verticallyCenter spaceBetween>\n            <Margin margin=\"0 10px\">{header.slice(0, 30)}</Margin>\n            <Padded padding=\"0 20px\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-arrow-right\" viewBox=\"0 0 16 16\">\n              <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\" />\n            </svg>\n            </Padded>\n          </Col>\n          <Col>\n            <Select isClearable={true} isSearchable={true} value={selectedHeader} options={options} onChange={setHeader} />\n          </Col>\n        </Row>\n      </Margin>\n      <Table>\n        <tbody>\n          {examples.map((e, idx) => {\n            return (\n              <tr key={idx}>\n                <td style={{ backgroundColor: '#ecf0f1', textAlign: 'center', width: \"40px\" }}>\n                  {idx}\n                </td>\n                <td style={{ padding: '10px 20px' }}>\n                  {e || <i>No Data</i>}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n\nconst HeaderMapperRow = ({options, header, examples, headerMapping, setHeaderMapping, fieldStatistics}) => {\n  let block = null;\n  const theme = useTheme()\n  if (headerMapping.confirmed) {\n    block = (\n      <Row>\n        <Col>\n          <Row>\n            <Col verticallyCenter spaceBetween>\n              <Margin margin=\"0 10px\">{header.slice(0, 30)}</Margin>\n              <Padded padding=\"0 20px\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-arrow-right\" viewBox=\"0 0 16 16\">\n                  <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\" />\n                </svg>\n              </Padded>\n            </Col>\n            <Col>\n              <Select isDisabled={true} value={headerMapping.selectedField} />\n            </Col>\n          </Row>\n        </Col>\n        <Col spaceBetween verticallyCenter>\n          <div>\n            <svg style={{margin: \"-2px 10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill={theme.colors.success} className=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n              <path d=\"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z\" />\n            </svg>\n            Confirmed\n          </div>\n\n          <Button onClick={() => {\n            setHeaderMapping({\n              ...headerMapping,\n              confirmed: false,\n            })\n          }}>Edit</Button>\n        </Col>\n      </Row>\n    );\n  } else if (headerMapping.ignored) {\n    block = (\n      <Row>\n        <Col verticallyCenter>\n          <Margin margin=\"0 10px\">{ header }</Margin>\n        </Col>\n        <Col spaceBetween verticallyCenter>\n          <div>\n            <svg style={{margin: \"-2px 10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-eye-slash-fill\" viewBox=\"0 0 16 16\">\n              <path d=\"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z\" />\n              <path d=\"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z\" />\n            </svg>\n            Ignored\n          </div>\n\n          <Button onClick={() => {\n            setHeaderMapping({\n              ...headerMapping,\n              selectedField: null,\n              ignored: false,\n              name: null,\n            })\n          }}>Edit</Button>\n        </Col>\n      </Row>\n    );\n  } else {\n    block = (\n      <Row>\n        <Col>\n          <HeaderMapperSelection\n            options={options}\n            header={header}\n            examples={examples}\n            selectedHeader={headerMapping.selectedField}\n            setHeader={(selectedField) => {\n              setHeaderMapping({\n                ...headerMapping,\n                selectedField,\n                ignored: false,\n                name: header,\n              })\n            }}\n          />\n        </Col>\n        <Col>\n          <Padded\n            padding=\"20px 0 0 20px\"\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"90%\",\n              justifyContent: \"space-between\"\n            }}>\n            <div>\n              {headerMapping.selectedField && (\n                <MappingStatistics selectedField={headerMapping.selectedField} fieldStatistics={fieldStatistics} />\n              )}\n            </div>\n            <div>\n              {\n                headerMapping.selectedField && \n                <Button style={{ marginRight: '10px' }} variant=\"success\" onClick={() => {\n                  setHeaderMapping({ ...headerMapping, confirmed: true });\n                }}>Confirm mapping</Button>\n              }\n              <Button variant=\"secondary\" outline onClick={() => {\n                setHeaderMapping({ ...headerMapping, ignored: true });\n              }}>Ignore this column</Button>\n            </div>\n          </Padded>\n        </Col>\n      </Row>\n    );\n  }\n  return (\n    <Margin margin=\"20px 0\">\n      <Card>{block}</Card>\n    </Margin>\n  );\n}\nexport default HeaderMapperRow;","import React from 'react';\nimport HeaderMapperRow from './HeaderMapperRow';\nimport { Button, Align, Margin, TextStyled, Col, Row } from './common'\n\nconst HeaderMapper = ({ parsed, fields, statistics, headerMappings, setHeaderMappings, missingRequiredFields, onComplete, restart }) => {\n  const data = parsed.data;\n  const options = fields.map(f => {\n    return {\n      label: f.label,\n      value: f.key,\n    }\n  });\n\n  const hasMissingRequiredFields = missingRequiredFields.length > 0;\n\n  return (\n    <div>\n      <div>\n        <h5>{parsed.data.length - 1} Rows Imported</h5>\n      </div>\n      {\n        data[0].map((header, columnIndex) => {\n          const examples = data.slice(1, 4).map(d => d[columnIndex]);\n          const headerMapping = headerMappings[columnIndex] || {};\n          const fieldStatistics = {\n            total: statistics.total,\n            statistics: statistics.statisticsByFieldKey[headerMapping.selectedField?.value],\n          }\n          return <HeaderMapperRow\n            key={columnIndex}\n            columnIndex={columnIndex}\n            header={header}\n            examples={examples}\n            headerMapping={headerMapping}\n            setHeaderMapping={(headerMapping) => {\n              let newMappings = { ...headerMappings }\n              headerMapping.columnIndex = columnIndex;\n              newMappings[columnIndex] = headerMapping\n              setHeaderMappings(newMappings);\n            }}\n            options={options}\n            fieldStatistics={fieldStatistics}\n          />\n        })\n      }\n      <Margin margin=\"20px 0\">\n        <Align right>\n          {hasMissingRequiredFields && (\n            missingRequiredFields.map(f => {\n              return (\n                <div>\n                  <TextStyled style={{ marginBottom: \"15px\" }} danger bold>\n                    Missing mapping for {f.label}\n                    <svg style={{marginLeft: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#e74c3c\" className=\"bi bi-exclamation-circle-fill\" viewBox=\"0 0 16 16\">\n                      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\" />\n                    </svg>\n                  </TextStyled>\n                </div>\n              );\n            })\n          )}\n        </Align>\n        <Row>\n          <Col>\n            <Button onClick={restart} outline>\n              Back\n            </Button>\n          </Col>\n          <Col>\n            <Align right>\n              <Button onClick={onComplete} variant={hasMissingRequiredFields ? \"danger\" : \"primary\"}>\n                {hasMissingRequiredFields && \"Proceed Anyways\"}\n                {!hasMissingRequiredFields && \"Review\"}\n              </Button>\n            </Align>\n          </Col>\n        </Row>\n      </Margin>\n    </div>\n  );\n};\n\nexport default HeaderMapper;\n","export const isUndefinedOrNull = (a) => {\n  return a === null || a === undefined\n}\n\nexport const isPresent = (a) => !isUndefinedOrNull(a)\n\nexport const formatData = (headerMappings, data) => {\n  const output = []\n  for (let rowIndex = 1; rowIndex < data.length; rowIndex++) {\n    const item = {}\n    const row = data[rowIndex]\n    Object.keys(headerMappings).forEach((k) => {\n      const headerMapping = headerMappings[k]\n      const columnIndex = headerMapping.columnIndex\n      if (headerMapping.selectedField) {\n        item[headerMapping.selectedField.value] = row[columnIndex]\n      }\n    })\n    item.rowIndex = rowIndex - 1\n    output.push(item)\n  }\n  return output\n}\n\nexport const buildSuggestedHeaderMappings = (fields, headers) => {\n  const headerMappings = {}\n  headers.forEach((header, columnIndex) => {\n    const foundField = fields.find((f) => {\n      const normalizedKey = f.key\n        .toLowerCase()\n        .replace('_', '')\n        .replace(' ', '')\n      const normalizedHeader = header\n        .toLowerCase()\n        .replace('_', '')\n        .replace(' ', '')\n      return normalizedKey === normalizedHeader\n    })\n\n    if (!foundField) {\n      return\n    }\n\n    headerMappings[columnIndex] = {\n      columnIndex,\n      name: header,\n      selectedField: {\n        value: foundField.key,\n        label: foundField.label\n      }\n    }\n  })\n  /*\n    create header mappings\n    (columnIndex => {columnIndex, name: inputHeader, selectedField: {value: '', label: ''}})\n  */\n  return headerMappings\n}\n\nexport const filterEmptyRows = (formattedData) => {\n  return formattedData.filter(\n    (d) => Object.keys(d).filter((k) => k !== 'rowIndex').length > 0\n  )\n}\n\nexport const filterInvalidRows = (formattedData, validationResult) => {\n  const rowIndexesWithErrors = validationResult.rowIndexesWithErrors()\n  formattedData = formattedData.filter(\n    (row) => !rowIndexesWithErrors.has(row.rowIndex)\n  )\n  return filterEmptyRows(formattedData)\n}\n\nexport const removeTemporaryKeys = (formattedData) => {\n  formattedData.forEach((f) => {\n    delete f.rowIndex\n  })\n  return formattedData\n}\n\nexport const fieldIsRequired = (field) => {\n  if (field.validators && field.validators.length > 0) {\n    const isRequired = field.validators.find((v) => v.validate === 'required')\n    return !!isRequired\n  }\n  return false\n}\n\nexport const buildFinalData = (formattedData, validationResult) => {\n  return removeTemporaryKeys(\n    filterInvalidRows(filterEmptyRows(formattedData), validationResult)\n  )\n}\n\nexport function isObject(item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param ...sources\n */\nexport function mergeDeep(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nfunction componentToHex(c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nexport function rgbToHex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nexport function hexToRgb(hex) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport {AgGridColumn, AgGridReact} from 'ag-grid-react';\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\nimport { Button, Margin, Align, Row, Col } from './common';\nimport { filterEmptyRows, isPresent } from '../utils';\nimport { useTheme } from 'styled-components';\n\n\nconst DataEditor = ({ formattedData, fields, onSubmit, onBack, validationResult, setRowData, statistics }) => {\n  const [gridApi, setGridApi] = useState(null);\n  const [gridColumnApi, setGridColumnApi] = useState(null);\n  const validationRef = useRef(validationResult);\n  validationRef.current = validationResult;\n\n  useEffect(() => {\n    setTimeout(() => {\n      gridApi?.redrawRows();\n    }, 0);\n  }, [validationResult]);\n\n  const onGridReady = (params) => {\n    setGridApi(params.api);\n    setGridColumnApi(params.columnApi);\n  };\n\n  const [onlyShowErrors, _setOnlyShowErrors] = useState(false);\n  const computeCellStyle = (params) => {\n    if (\n      isPresent(params.column.colDef.field) &&\n      isPresent(params.data.rowIndex) &&\n      validationRef.current.hasError(params.column.colDef.field, params.data.rowIndex)\n    ) {\n      return {\n        color: 'rgba(192, 57, 43, 1.0)',\n        backgroundColor: 'rgba(231, 76, 60, 0.3)',\n        border: '1px solid rgba(192, 57, 43, 1.0)',\n      }\n    }\n    return null;\n  }\n\n  const setOnlyShowErrors = (newValue) => {\n    _setOnlyShowErrors(newValue);\n    let newRowData;\n    if (newValue) {\n      const rowIndexesWithErrors = validationResult.rowIndexesWithErrors();\n      newRowData = formattedData.filter((_, index) => rowIndexesWithErrors.has(index));\n    } else {\n      newRowData = formattedData;\n    }\n    gridApi.setRowData(newRowData);\n  }\n\n  const onCellValueChanged = (params) => {\n    // Change the data and revalidate the entire dataset.\n    // Because some validations are global validations.\n    setRowData(params.data, params.rowIndex);\n  }\n\n  const hasData = () => {\n    return filterEmptyRows(formattedData).length > 0;\n  }\n\n  const hasErrors = Object.keys(validationResult.errorsByFieldKeyByRowIndex).length > 0\n  const theme = useTheme();\n  return (\n    <div>\n      <Margin margin=\"20px 0\">\n        {(!hasData() || hasErrors) && (\n          <div>\n            <input checked={onlyShowErrors} onChange={(e) => {\n              setOnlyShowErrors(e.target.checked);\n            }} type=\"checkbox\" name=\"row-errors\" id=\"row-errors\" />\n            <label style={{marginLeft: '10px'}} htmlFor=\"row-errors\">Only show rows with errors</label>\n          </div>\n        )}\n        {hasData() && !hasErrors && (\n          <div style={{color: theme.colors.success, fontWeight: \"bold\", display: \"flex\", alignItems: \"center\"}}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n              <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\" />\n            </svg>\n\n            All rows pass validation!\n          </div>\n        )}\n      </Margin>\n      <div style={{height: 500, width: '100%'}} className=\"ag-theme-alpine\">\n        <AgGridReact\n          onCellValueChanged={onCellValueChanged}\n          rowData={formattedData}\n          tooltipShowDelay={0}\n          defaultColDef={{\n            flex: 1,\n            minWidth: 100,\n            editable: true,\n          }}\n          onGridReady={onGridReady}\n        >\n          {fields.map(field => {\n            return (\n              <AgGridColumn\n                resizable={true}\n                cellStyle={computeCellStyle}\n                key={field.key}\n                headerName={field.label}\n                tooltipValueGetter={(params) => {\n                  const rowIndex = params.rowIndex;\n                  const columnName = params.colDef.field;\n\n                  if (validationRef.current.hasError(columnName, rowIndex)) {\n                    const errors = validationRef.current.getErrors(columnName, rowIndex);\n                    return errors.map(e => e.message).join(\", \");\n                  }\n                }}\n                field={field.key}\n              ></AgGridColumn>\n            );\n          })}\n        </AgGridReact>\n      </div>\n      <Margin margin=\"20px 0\">\n        <Row>\n          <Col>\n            {onBack && (\n              <Button onClick={onBack} outline>\n                Back\n              </Button>\n            )}\n          </Col>\n          <Col>\n            <Align right>\n              {hasData() && (\n                <Button onClick={onSubmit}>\n                  {validationResult.hasErrors() && \"Upload Rows Without Errors\"}\n                  {!validationResult.hasErrors() && \"Upload\"}\n                </Button>\n              )}\n            </Align>\n          </Col>\n        </Row>\n      </Margin>\n    </div>\n  );\n};\n\nexport default DataEditor;\n","import React from 'react';\nimport { Margin } from './common';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport { useTheme } from 'styled-components'\nimport 'react-circular-progressbar/dist/styles.css';\nimport { hexToRgb } from '../utils';\n\n\nconst Failed = () => {\n  const theme = useTheme();\n  return <div>\n    <Margin margin=\"60px\" style={{textAlign: 'center'}}>\n      <div style={{width: \"100px\", height: \"100px\", margin: \"0 auto\", position: \"relative\"}}>\n        <svg style={{position: \"absolute\", margin: \"auto\", top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill={theme.colors.danger} className=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\n          <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n        </svg>\n      </div>\n      <h2 style={{fontSize: \"2em\"}}>Something went wrong</h2>\n    </Margin>\n  </div>\n}\n\nconst Uploading = ({progress, pending}) => {\n  const theme = useTheme()\n  const {r, g, b} = hexToRgb(theme.colors.success)\n  return <div>\n    <Margin margin=\"60px\" style={{textAlign: 'center'}}>\n      <div style={{width: \"100px\", height: \"100px\", margin: \"0 auto\", position: \"relative\"}}>\n        <CircularProgressbarWithChildren\n          value={progress}\n          strokeWidth={5}\n          styles={buildStyles({\n            // Colors\n            pathColor: `rgba(${r}, ${g}, ${b}, ${progress / 100})`,\n          })}\n        >\n          {!pending && (\n            <SuccessIcon />\n          )}\n          {pending && (\n            <div><b style={{fontSize: '1.2em'}}>{progress}%</b></div>\n          )}\n        </CircularProgressbarWithChildren>\n      </div>\n      {pending && (\n        <h2 style={{fontSize: \"2em\"}}>Uploading</h2>\n      )}\n      {!pending && (\n        <h2 style={{fontSize: \"2em\"}}>Success</h2>\n      )}\n    </Margin>\n  </div>\n}\n\nconst SuccessIcon = () => {\n  const theme = useTheme();\n  return (\n    <svg style={{position: \"absolute\", margin: \"auto\", top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill={theme.colors.success} class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n      <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"/>\n    </svg>\n  )\n}\n\nconst Completed = ({formattedData, progress, pending, failed}) => {\n  if (failed) {\n    return <Failed />\n  }\n  return (\n    <Uploading progress={progress} formattedData={formattedData} pending={pending} />\n  );\n};\n\nexport default Completed;\n","export function has(collection, value) {\n  return collection.indexOf(value) !== -1\n}\n\nexport function find(collection, value) {\n  return collection.filter(value) === 0\n}\n\nexport function eachWithObject(collection, callback) {\n  const obj = {}\n  collection.forEach((item) => {\n    callback(item, obj)\n  })\n  return obj\n}\n\nexport function hasData(row) {\n  const data = { ...row }\n  delete data.rowIndex\n  const values = Object.values(data)\n  return values.length > 0\n}\n","/* eslint-disable */\nimport { hasData, eachWithObject } from '../utils/functional'\nimport { fieldIsRequired } from '../utils'\n\nexport class Validator {\n  constructor(definition) {\n    this.definition = definition\n  }\n\n  isValid(fieldValue, row) {\n    throw new Error('Not Implemented')\n  }\n\n  static buildFromDefinition(definition) {\n    const mapping = {\n      regex_matches: RegexValidator,\n      required: RequiredValidator,\n      unique: UniqueValidator,\n      includes: IncludesValidator,\n      multi_includes: MultiIncludesValidator,\n      is_integer: IntegerValidator,\n      custom: CustomValidator\n    }\n    if (!(definition.validate in mapping)) {\n      throw new Error(`Missing validator for ${definition.validate}. Valid validator options are ${Object.keys(mapping).join(\", \")}`)\n    }\n    const FoundValidator = mapping[definition.validate]\n    return new FoundValidator(definition)\n  }\n}\n\nexport class MultiIncludesValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    this.delimiter = definition.delimiter || /[,|]/\n    this.values = definition.values\n    if (!this.values) {\n      throw new Error(\"Missing values for `multi_includes` validator\");\n    }\n  }\n\n  isValid(fieldValue) {\n    const values = fieldValue.split(this.delimiter)\n    // If any of the values are not in the list of valid values, then the field is invalid\n    if (values.some((value) => !this.values.includes(value.trim()))) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is not valid',\n        errorType: 'includes'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class IncludesValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    this.values = definition.values\n    if (!this.values) {\n      throw new Error(\"Missing `values` for `includes` validator\");\n    }\n  }\n\n  isValid(fieldValue) {\n    if (!this.values.includes(fieldValue)) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is not valid',\n        errorType: 'includes'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class CustomValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    const { key, validateFn } = definition\n    this.key = key\n    this.validateFn = validateFn\n  }\n\n  isValid(fieldValue) {\n    const result = this.validateFn(fieldValue)\n    const valid = !!!result\n    return {\n      valid: valid,\n      message: result?.message || this.definition.error,\n      errorType: result?.key || this.key\n    }\n  }\n}\n\nexport class IntegerValidator extends Validator {\n  isValid(fieldValue) {\n    return {\n      valid:\n        !isNaN(fieldValue) && fieldValue !== null && fieldValue !== undefined,\n      message: this.definition.error || 'This is not a valid number',\n      errorType: 'is_integer'\n    }\n  }\n}\n\nexport class UniqueValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    this.seen = {}\n  }\n\n  isValid(fieldValue) {\n    if (fieldValue in this.seen) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is not unique',\n        errorType: 'unique'\n      }\n    }\n    this.seen[fieldValue] = true\n    return { valid: true }\n  }\n}\n\nfunction escapeStringRegExp(str) {\n  return str.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n}\n\nexport class RegexValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    if (typeof this.definition.regex === 'object') {\n      this.regexp = this.definition.regex\n    } else {\n      this.regexp = new RegExp(escapeStringRegExp(this.definition.regex))\n    }\n    this.seen = {}\n  }\n\n  isValid(fieldValue) {\n    const matches = this.regexp.test(fieldValue)\n    if (!matches) {\n      return {\n        valid: false,\n        message: 'This value is invalid' || this.definition.error,\n        errorType: 'regex'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class RequiredValidator extends Validator {\n  isValid(fieldValue) {\n    if (!fieldValue) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is required',\n        errorType: 'required'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class ValidationResult {\n  constructor() {\n    this.errorsByFieldKeyByRowIndex = {}\n  }\n\n  hasErrors() {\n    return (\n      Object.keys(this.errorsByFieldKeyByRowIndex).filter((fieldKey) => {\n        return Object.keys(this.errorsByFieldKeyByRowIndex[fieldKey]).length > 0\n      }).length > 0\n    )\n  }\n\n  rowIndexesWithErrors() {\n    let allRowIndexes = []\n    Object.keys(this.errorsByFieldKeyByRowIndex).forEach((fieldKey) => {\n      const rowIndexes = Object.keys(this.errorsByFieldKeyByRowIndex[fieldKey])\n      allRowIndexes = allRowIndexes.concat(\n        rowIndexes.map((r) => parseInt(r, 10))\n      )\n    })\n    return new Set(allRowIndexes)\n  }\n\n  addError(fieldKey, rowIndex, error) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    if (!(fieldKey in this.errorsByFieldKeyByRowIndex)) {\n      this.errorsByFieldKeyByRowIndex[fieldKey] = {}\n    }\n    if (!(rowIndex in this.errorsByFieldKeyByRowIndex[fieldKey])) {\n      this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex] = []\n    }\n    this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex].push(error)\n  }\n\n  hasError(fieldKey, rowIndex) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    return (\n      fieldKey in this.errorsByFieldKeyByRowIndex &&\n      rowIndex in this.errorsByFieldKeyByRowIndex[fieldKey]\n    )\n  }\n\n  getErrors(fieldKey, rowIndex) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    return this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex]\n  }\n}\n\nexport const applyValidation = (formattedData, fields) => {\n  const validatorsByFieldKey = eachWithObject(fields, (field, obj) => {\n    obj[field.key] = []\n    if (!field.validators) return\n    field.validators.forEach((validatorDefinition) => {\n      obj[field.key].push(Validator.buildFromDefinition(validatorDefinition))\n    })\n  })\n\n  const validationResult = new ValidationResult()\n  fields.forEach((field) => {\n    formattedData.forEach((row, rowIndex) => {\n      if (!hasData(row)) {\n        return\n      }\n      if (!(field.key in row) && !fieldIsRequired(field)) {\n        return\n      }\n      const value = row[field.key]\n      const validators = validatorsByFieldKey[field.key]\n\n      validators.forEach((v) => {\n        const result = v.isValid(value)\n        if (!result.valid) {\n          validationResult.addError(field.key, rowIndex, result)\n        }\n      })\n    })\n  })\n  return validationResult\n}\n\nconst computeStatisticsForField = (\n  fieldKey,\n  formattedData,\n  errorsByRowIndex\n) => {\n  const errorTypeCounts = { total: 0 }\n  const counts = { isNull: 0 }\n  formattedData.forEach((d) => {\n    if (!d[fieldKey]) {\n      counts.isNull += 1\n    }\n  })\n\n  Object.keys(errorsByRowIndex).forEach((rowIndex) => {\n    const errors = errorsByRowIndex[rowIndex]\n    if (errors && errors.length > 0) {\n      errorTypeCounts.total += 1\n    }\n    errors.forEach((error) => {\n      if (error.errorType in errorTypeCounts) {\n        errorTypeCounts[error.errorType] += 1\n      } else {\n        errorTypeCounts[error.errorType] = 1\n      }\n    })\n  })\n  return { errorTypeCounts, counts }\n}\n\nexport const computeStatistics = (\n  formattedData,\n  headerMappings,\n  validationResult\n) => {\n  const statisticsByFieldKey = {}\n  const headers = Object.keys(headerMappings).map((k) => headerMappings[k])\n  headers.forEach((headerMapping) => {\n    if (!headerMapping.selectedField) {\n      return\n    }\n    const fieldKey = headerMapping.selectedField.value\n    statisticsByFieldKey[fieldKey] = computeStatisticsForField(\n      fieldKey,\n      formattedData,\n      validationResult.errorsByFieldKeyByRowIndex[fieldKey] || {}\n    )\n  })\n  return { statisticsByFieldKey, total: formattedData.length }\n}\n\nexport class PostalCodeValidator extends Validator {\n  constructor() {\n    super({ regex: /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/ })\n  }\n}\n\nexport class PhoneNumberValidator extends Validator {\n  constructor() {\n    super({ regex: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/ })\n  }\n}\n\nexport class EmailValidator extends RegexValidator {\n  constructor() {\n    super({ regex: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/ })\n  }\n}\n","export const STATE_TO_CODES = [\n  ['Arizona', 'AZ'],\n  ['Alabama', 'AL'],\n  ['Alaska', 'AK'],\n  ['Arkansas', 'AR'],\n  ['California', 'CA'],\n  ['Colorado', 'CO'],\n  ['Connecticut', 'CT'],\n  ['Delaware', 'DE'],\n  ['Florida', 'FL'],\n  ['Georgia', 'GA'],\n  ['Hawaii', 'HI'],\n  ['Idaho', 'ID'],\n  ['Illinois', 'IL'],\n  ['Indiana', 'IN'],\n  ['Iowa', 'IA'],\n  ['Kansas', 'KS'],\n  ['Kentucky', 'KY'],\n  ['Louisiana', 'LA'],\n  ['Maine', 'ME'],\n  ['Maryland', 'MD'],\n  ['Massachusetts', 'MA'],\n  ['Michigan', 'MI'],\n  ['Minnesota', 'MN'],\n  ['Mississippi', 'MS'],\n  ['Missouri', 'MO'],\n  ['Montana', 'MT'],\n  ['Nebraska', 'NE'],\n  ['Nevada', 'NV'],\n  ['New Hampshire', 'NH'],\n  ['New Jersey', 'NJ'],\n  ['New Mexico', 'NM'],\n  ['New York', 'NY'],\n  ['North Carolina', 'NC'],\n  ['North Dakota', 'ND'],\n  ['Ohio', 'OH'],\n  ['Oklahoma', 'OK'],\n  ['Oregon', 'OR'],\n  ['Pennsylvania', 'PA'],\n  ['Rhode Island', 'RI'],\n  ['South Carolina', 'SC'],\n  ['South Dakota', 'SD'],\n  ['Tennessee', 'TN'],\n  ['Texas', 'TX'],\n  ['Utah', 'UT'],\n  ['Vermont', 'VT'],\n  ['Virginia', 'VA'],\n  ['Washington', 'WA'],\n  ['West Virginia', 'WV'],\n  ['Wisconsin', 'WI'],\n  ['Wyoming', 'WY']\n]\n","import { eachWithObject, has, hasData } from '../utils/functional'\nimport { STATE_TO_CODES } from './utils'\n\nexport const applyTransformations = (formattedData, fields) => {\n  const newData = [...formattedData]\n  const pipelineByFieldKey = eachWithObject(fields, (field, obj) => {\n    obj[field.key] = new Pipeline()\n    if (!field.transformers) return\n    field.transformers.forEach((transformerDefinition) => {\n      obj[field.key].push(\n        Transformer.buildFromDefinition(transformerDefinition)\n      )\n    })\n  })\n\n  fields.forEach((field) => {\n    const pipeline = pipelineByFieldKey[field.key]\n    newData.forEach((row) => {\n      if (!hasData(row)) {\n        return\n      }\n      if (!(field.key in row)) {\n        return\n      }\n\n      row[field.key] = pipeline.transform(row[field.key])\n    })\n  })\n\n  return newData\n}\n\nexport class Pipeline {\n  // Series of transformations\n  constructor(steps = []) {\n    this.steps = steps\n  }\n\n  push(step) {\n    this.steps.push(step)\n  }\n\n  transform(value) {\n    let current = value\n    this.steps.forEach((step) => {\n      current = step.transform(current)\n    })\n    return current\n  }\n}\n\nexport class Transformer {\n  static buildFromDefinition(definition) {\n    const mapping = {\n      phone_number: PhoneNumberTransformer,\n      postal_code: PostalCodeTransformer,\n      state_code: StateCodeTransformer,\n      strip: StripTransformer,\n      custom: CustomTransformer\n    }\n    if (!(definition.transformer in mapping)) {\n      throw new Error(\n        `Missing validator for ${\n          definition.transformer\n        }. Valid transformer options are ${Object.keys(mapping).join(', ')}`\n      )\n    }\n    const FoundValidator = mapping[definition.transformer]\n    return new FoundValidator(definition)\n  }\n\n  transform(value) {\n    const newValue = this.parse(value)\n    if (newValue) return newValue\n    return value\n  }\n}\n\nexport class StripTransformer extends Transformer {\n  parse(value) {\n    return value.trim()\n  }\n}\n\nexport class CustomTransformer extends Transformer {\n  constructor(definition) {\n    super(definition)\n    const { key, transformFn } = definition\n    this.key = key\n    this.parse = transformFn\n  }\n}\n\nexport class PhoneNumberTransformer extends Transformer {\n  parse(value) {\n    return value.replace(/[^0-9]/g, '')\n  }\n}\n\nexport class StateCodeTransformer extends Transformer {\n  parse(value) {\n    const states = STATE_TO_CODES.map((s2c) => s2c[0].toLowerCase())\n    if (has(states, value.toLowerCase())) {\n      const index = states.indexOf(value.toLowerCase())\n      return STATE_TO_CODES[index][1]\n    }\n  }\n}\n\nexport class PostalCodeTransformer extends Transformer {\n  parse(value) {\n    if (has(value, '-')) {\n      return value.split('-')[0]\n    }\n  }\n}\n","export async function delay(ms) {\n  await new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n","// From https://themestr.app/builder\nexport const THEME_DEFAULT = {\n  colors: {\n    primary: \"#2980b9\",\n    secondary: \"#7f8c8d\",\n    success: \"#27ae60\",\n    danger: \"#e74c3c\",\n    info: \"#0F81C7\",\n    warning: \"#e67e22\",\n    light: \"#ececec\",\n    dark: \"#222222\"\n  }\n}\n\nexport const THEME_SIGNAL = {\n  colors: {\n    primary: \"#FF304F\",\n    secondary: \"#CACACA\",\n    success: \"#015668\",\n    danger: \"#06648C\",\n    info: \"#0F81C7\",\n    warning: \"#0DE2EA\",\n    light: \"#ececec\",\n    dark: \"#222222\"\n  }\n}\n\nexport const THEME_FRESCA = {\n  colors: {\n    primary: \"#07689F\",\n    secondary: \"#C9D6DF\",\n    success: \"#11D3BC\",\n    danger: \"#F67280\",\n    info: \"#A2D5F2\",\n    warning: \"#FF7E67\",\n    light: \"#FAFAFA\",\n    dark: \"#4e4e4e\"\n  }\n}\n\n","import React, { useReducer } from 'react'\nimport Papa from 'papaparse'\nimport Header from './components/Header'\nimport FileUploader from './components/FileUploader'\nimport HeaderMapper from './components/HeaderMapper'\nimport DataEditor from './components/DataEditor'\nimport Completed from './components/Completed'\nimport {\n  fieldIsRequired,\n  formatData,\n  buildSuggestedHeaderMappings,\n  buildFinalData,\n  mergeDeep\n} from './utils'\nimport { ThemeProvider } from 'styled-components'\nimport { Root, Margin, Container } from './components/common'\nimport {\n  applyValidation,\n  computeStatistics,\n  ValidationResult\n} from './validators'\nimport { applyTransformations } from './transformers'\nimport { delay } from './utils/timing'\nimport { THEME_DEFAULT } from './themes'\nexport * from './themes'\n\nfunction buildInitialState(inject) {\n  return {\n    ...inject,\n    currentStep: 0,\n    parsed: null,\n    pending: true,\n    progress: 0,\n    failed: false,\n    formattedData: [],\n    statistics: {\n      statisticsByFieldKey: {},\n      total: null\n    },\n    headerMappings: {},\n    validationResult: new ValidationResult()\n  }\n}\n\nconst computeMetadata = (formattedData, fields, headerMappings) => {\n  const newValidationResult = applyValidation(formattedData, fields)\n  const newStatistics = computeStatistics(\n    formattedData,\n    headerMappings,\n    newValidationResult\n  )\n  return {\n    validationResult: newValidationResult,\n    statistics: newStatistics\n  }\n}\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'RESTART':\n      return buildInitialState({ fields: state.fields })\n    case 'DECREMENT_STEP':\n      return { ...state, currentStep: state.currentStep - 1 }\n    case 'COMPLETED_MAPPINGS': {\n      const transformedFormattedData = applyTransformations(\n        state.formattedData,\n        state.fields\n      )\n      return {\n        ...state,\n        formattedData: transformedFormattedData,\n        currentStep: state.currentStep + 1\n      }\n    }\n    case 'SET_CURRENT_STEP': {\n      const currentStep = action.payload.currentStep\n      return {\n        ...state,\n        currentStep\n      }\n    }\n    case 'FILE_PARSED': {\n      const automaticHeaderMappings = buildSuggestedHeaderMappings(\n        state.fields,\n        action.payload.parsed.data[0]\n      )\n      const formattedData = formatData(\n        automaticHeaderMappings,\n        action.payload.parsed.data\n      )\n      return {\n        ...state,\n        ...computeMetadata(\n          formattedData,\n          state.fields,\n          automaticHeaderMappings\n        ),\n        parsed: action.payload.parsed,\n        headerMappings: automaticHeaderMappings,\n        formattedData,\n        currentStep: 1\n      }\n    }\n    case 'HEADER_MAPPINGS_CHANGED': {\n      const newFormattedData = formatData(\n        action.payload.headerMappings,\n        state.parsed.data\n      )\n      return {\n        ...state,\n        ...computeMetadata(\n          newFormattedData,\n          state.fields,\n          action.payload.headerMappings\n        ),\n        headerMappings: action.payload.headerMappings,\n        formattedData: newFormattedData\n      }\n    }\n    case 'CELL_CHANGED': {\n      const copy = [...state.formattedData]\n      copy[action.payload.index] = action.payload.row\n      return {\n        ...state,\n        ...computeMetadata(copy, state.fields, state.headerMappings),\n        formattedData: copy\n      }\n    }\n    case 'PROGRESS':\n      return { ...state, progress: action.payload.progress }\n    case 'PENDING':\n      return { ...state, currentStep: 3, pending: true, progress: 0 }\n    case 'COMPLETE':\n      return { ...state, currentStep: 3, pending: false, progress: 100 }\n    case 'FAILED':\n      return { ...state, currentStep: 3, failed: true }\n    default:\n      return state\n  }\n}\n\nconst Importer = ({ theme, onComplete, fields }) => {\n  const [\n    {\n      currentStep,\n      parsed,\n      formattedData,\n      statistics,\n      headerMappings,\n      validationResult,\n      pending,\n      progress,\n      failed\n    },\n    dispatch\n  ] = useReducer(reducer, buildInitialState({ fields }))\n\n  const restart = () => {\n    dispatch({ type: 'RESTART' })\n  }\n\n  const setFile = (file) => {\n    Papa.parse(file, {\n      skipEmptyLines: true,\n      complete: (newParsed) => {\n        dispatch({ type: 'FILE_PARSED', payload: { parsed: newParsed } })\n      }\n    })\n  }\n\n  const rowData = []\n  for (let i = 0; i < 100; i++) {\n    rowData.push({ rowIndex: i })\n  }\n\n  const usedFilters = Object.keys(headerMappings)\n    .map((h) => headerMappings[h])\n    .filter((h) => !h.ignored && h.selectedField)\n    .map((h) => h.selectedField.value)\n\n  const unselectedFields = fields.filter((filter) => {\n    return usedFilters.indexOf(filter.key) === -1\n  })\n\n  const headers = Object.keys(headerMappings)\n    .map((h) => headerMappings[h])\n    .filter((h) => h.confirmed)\n    .map((h) => h.selectedField.value)\n\n  const selectedFields = fields.filter((f) => {\n    return headers.indexOf(f.key) >= 0\n  })\n\n  const missingRequiredFields = fields\n    .filter((f) => fieldIsRequired(f))\n    .filter((f) => {\n      return selectedFields.map((f) => f.key).indexOf(f.key) === -1\n    })\n\n  const finalSelectedFields = fields.filter((f) => {\n    return headers.indexOf(f.key) >= 0 || fieldIsRequired(f)\n  })\n\n  const submitWrapper = async () => {\n    dispatch({ type: 'PENDING' })\n    try {\n      await onComplete(\n        buildFinalData(formattedData, validationResult),\n        (progress) => {\n          dispatch({ type: 'PROGRESS', payload: { progress: progress } })\n        }\n      )\n    } catch (e) {\n      dispatch({ type: 'FAILED' })\n      return\n    }\n    await delay(400)\n    dispatch({ type: 'PROGRESS', payload: { progress: 100 } })\n    await delay(200)\n    dispatch({ type: 'COMPLETE' })\n  }\n\n  const finalTheme = mergeDeep({}, THEME_DEFAULT, theme)\n  console.log(theme?.colors?.primary, finalTheme.colors.primary)\n  return (\n    <ThemeProvider theme={finalTheme}>\n      <Root>\n        <Container>\n          <Header\n            steps={['Upload', 'Match', 'Review', 'Complete']}\n            currentStep={currentStep}\n            onClick={(step) => {\n              if (step === 'Upload') {\n                restart()\n              } else if (step === 'Match') {\n                dispatch({ type: 'RESTART', payload: { currentStep: 1 } })\n              } else if (step === 'Review') {\n                dispatch({ type: 'RESTART', payload: { currentStep: 2 } })\n              }\n            }}\n          />\n          {currentStep === 0 && (\n            <div>\n              <FileUploader setFile={setFile} />\n              <Margin margin='40px 0 10px 0'>\n                <h6>Or just manually enter your data</h6>\n              </Margin>\n              <DataEditor\n                statistics={statistics}\n                formattedData={\n                  formattedData.length > 0 ? formattedData : rowData\n                }\n                fields={fields}\n                headerMappings={headerMappings}\n                validationResult={validationResult}\n                onSubmit={submitWrapper}\n                setRowData={(row, index) => {\n                  dispatch({\n                    type: 'CELL_CHANGED',\n                    payload: { index: index, row: row }\n                  })\n                }}\n              />\n            </div>\n          )}\n          {currentStep === 1 && (\n            <HeaderMapper\n              statistics={statistics}\n              parsed={parsed}\n              fields={unselectedFields}\n              headerMappings={headerMappings}\n              missingRequiredFields={missingRequiredFields}\n              setHeaderMappings={(newHeaderMappings) => {\n                dispatch({\n                  type: 'HEADER_MAPPINGS_CHANGED',\n                  payload: { headerMappings: newHeaderMappings }\n                })\n              }}\n              restart={restart}\n              onComplete={() => {\n                dispatch({ type: 'COMPLETED_MAPPINGS' })\n              }}\n            />\n          )}\n          {currentStep === 2 && (\n            <DataEditor\n              statistics={statistics}\n              formattedData={formattedData}\n              fields={finalSelectedFields}\n              headerMappings={headerMappings}\n              validationResult={validationResult}\n              onBack={() => {\n                dispatch({ type: 'DECREMENT_STEP' })\n              }}\n              onSubmit={submitWrapper}\n              setRowData={(row, index) => {\n                dispatch({\n                  type: 'CELL_CHANGED',\n                  payload: { index: index, row: row }\n                })\n              }}\n            />\n          )}\n          {currentStep === 3 && (\n            <Completed\n              formattedData={formattedData}\n              pending={pending}\n              progress={progress}\n              failed={failed}\n            />\n          )}\n        </Container>\n      </Root>\n    </ThemeProvider>\n  )\n}\n\nexport default Importer\n","import React, { useState } from 'react';\nimport Importer, {THEME_SIGNAL, THEME_FRESCA, THEME_DEFAULT} from 'react-importer'\n\nimport 'jsoneditor-react/es/editor.min.css';\nimport 'react-importer/dist/index.css'\n\nconst ALL_THEMES = [THEME_DEFAULT, THEME_SIGNAL, THEME_FRESCA]\nconst CONTENT = `import Importer from 'react-importer'\n\n<Importer\n  fields={[\n    {\n      label: \"Name\", key: \"name\", validators: [\n        { validate: \"required\" },\n      ]\n    },\n    {\n      label: \"Email\", key: \"email\", validators: [\n        { validate: \"required\" },\n        { validate: \"unique\", error: \"This email is not unique\" },\n      ]\n    },\n    {\n      label: \"State\", key: \"state\", transformers: [\n        { transformer: \"state_code\" }\n      ]\n    },\n  ]}\n  onComplete={(data) => {\n    console.log(data)\n  }}\n/>`\n\nconst ThemeCard = ({theme, onClick}) => {\n  return <div className=\"theme-card\" onClick={onClick}>\n    <div style={{display: 'flex', flexDirection: 'row'}}>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.primary}}></div>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.success}}></div>\n    </div>\n\n    <div style={{display: 'flex', flexDirection: 'row'}}>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.danger}}></div>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.info}}></div>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.warning}}></div>\n      <div className=\"theme-color\" style={{backgroundColor: theme.colors.light}}></div>\n    </div>\n  </div>\n}\nconst App = () => {\n  const [ready, setReady] = useState(false);\n  const [currentTheme, setCurrentTheme] = useState(null);\n\n  const onComplete = async (data, onProgress) => {\n    await new Promise((resolve) => setTimeout(resolve, 200));\n    onProgress(20)\n    await new Promise((resolve) => setTimeout(resolve, 200));\n    onProgress(50)\n    await new Promise((resolve) => setTimeout(resolve, 200));\n    onProgress(100)\n    console.log(data);\n    setReady(true);\n  }\n  console.log(ALL_THEMES)\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"header\">\n          <div className=\"main\">\n            <svg style={{marginRight: '20px'}} xmlns=\"http://www.w3.org/2000/svg\" width=\"58\" height=\"58\" fill=\"#3498db\" className=\"bi bi-file-spreadsheet\" viewBox=\"0 0 16 16\">\n              <path d=\"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707L6.354 9.854z\" />\n            </svg>\n            React Importer\n          </div>\n          <div className=\"subtext\">A modern CSV importer in React.</div>\n        </div>\n\n        <div className=\"content\">\n          <h1>Building a CSV uploader is hard.</h1>\n          <p>Tired of people uploading invalid data into your application? Or writing custom import scripts that keep breaking?</p>\n          <p><b>React Importer</b> solves that for you.</p>\n        </div>\n\n        <div className=\"content\">\n          <h1>Drop in an uploader into your app in seconds.</h1>\n          <div>\n            <pre>\n              <code className=\"language-jsx\">\n                {CONTENT}\n              </code>\n            </pre>\n          </div>\n        </div>\n\n        <div className=\"content\">\n          <h1>Want to see a demo? Try uploading <a href=\"data.csv\">this file</a>.</h1>\n          <Importer\n            theme={{...ALL_THEMES[currentTheme]}}\n            fields={[\n              {\n                label: \"Name\", key: \"name\", validators: [\n                  { validate: \"required\" },\n                ]\n              },\n              {\n                label: \"Email\", key: \"email\", validators: [\n                  { validate: \"required\" },\n                  { validate: \"unique\", error: \"This email is not unique\" },\n                  {\n                    validate: \"regex_matches\",\n                    regex: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                  },\n                ]\n              },\n              {\n                label: \"Phone Number\", key: \"phone_number\", validators: [\n                  { validate: \"required\" },\n                ]\n              },\n              { label: \"City\", key: \"city\" },\n              {\n                label: \"State\", key: \"state\", transformers: [\n                  { transformer: \"state_code\" }\n                ]\n              },\n            ]}\n            onComplete={onComplete}\n          />\n          {ready && (\n            <div style={{ margin: \"0 auto\", maxWidth: \"1200px\" }}>\n              <h4>Check the console for the output!</h4>\n            </div>\n          )}\n        </div>\n        <div className=\"content\">\n          <h1>Feel free to customize the theme</h1>\n          <div className=\"theme-wrapper\">\n            <ThemeCard\n              theme={THEME_DEFAULT}\n              onClick={() => setCurrentTheme(0)}\n            />\n            <ThemeCard\n              theme={THEME_FRESCA}\n              onClick={() => setCurrentTheme(1)}\n            />\n            <ThemeCard\n              theme={THEME_SIGNAL}\n              onClick={() => setCurrentTheme(2)}\n            />\n          </div>\n        </div>\n\n      </div>\n      <footer>\n        <div className=\"container\">\n          <p><i>\"I'm so sick of building CSV importers\"</i></p>\n          <p>- Me</p>\n        </div>\n      </footer>\n    </div>\n  )\n};\n\nexport default App;\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}