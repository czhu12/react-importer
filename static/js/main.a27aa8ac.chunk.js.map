{"version":3,"sources":["../../src/components/Header.jsx","../../src/components/common.jsx","../../src/components/FileUploader.jsx","../../src/components/HeaderMapperRow.jsx","../../src/components/HeaderMapper.jsx","../../src/utils/index.js","../../src/components/DataEditor.jsx","../../src/components/Completed.jsx","../../src/contexts/index.js","../../src/validators/index.js","../../src/index.js","App.js","index.js"],"names":["TextEnd","styled","BreadcrumbItem","props","css","Aligned","Header","currentStep","id","steps","past","active","last","index","key","xmlns","width","height","fill","className","viewBox","fillRule","d","Container","TextStyled","styles","Root","Card","Align","Margin","Padded","Table","Row","Col","customCss","Button","color","rotate","keyframes","CircleProgress","FileUploader","setFile","useDropzone","isDragAccept","useEffect","acceptedFiles","console","backgroundColor","getRootProps","cursor","padding","getInputProps","margin","muted","flex","style","marginRight","marginBottom","right","variant","outline","percentage","a","b","Math","MappingStatistics","selectedField","total","fieldStatistics","counts","errorTypeCounts","HeaderMapperSelection","options","verticallyCenter","spaceBetween","header","isClearable","isSearchable","value","onChange","setHeader","examples","idx","textAlign","e","HeaderMapperRow","block","headerMapping","isDisabled","onClick","setHeaderMapping","confirmed","ignored","name","selectedHeader","display","flexDirection","justifyContent","HeaderMapper","restart","data","parsed","fields","f","label","hasMissingRequiredFields","missingRequiredFields","headerMappings","statistics","columnIndex","newMappings","setHeaderMappings","danger","bold","marginLeft","isPresent","isUndefinedOrNull","filterEmptyRows","formattedData","Object","k","fieldIsRequired","field","v","buildFinalData","validationResult","removeTemporaryKeys","rowIndexesWithErrors","row","filterInvalidRows","DataEditor","useState","validationRef","useRef","setTimeout","gridApi","computeCellStyle","params","border","hasData","hasErrors","checked","newValue","_setOnlyShowErrors","newRowData","setOnlyShowErrors","type","htmlFor","fontWeight","alignItems","class","onCellValueChanged","setRowData","rowData","tooltipShowDelay","defaultColDef","minWidth","editable","onGridReady","setGridApi","setGridColumnApi","resizable","cellStyle","headerName","tooltipValueGetter","rowIndex","columnName","errors","onBack","onSubmit","Completed","position","top","bottom","left","ThemeContext","createContext","colors","success","primary","warning","constructor","this","isValid","Error","buildFromDefinition","mapping","regex_matches","required","unique","is_integer","IntegerValidator","definition","FoundValidator","valid","isNaN","fieldValue","message","error","errorType","RegExp","str","regexp","test","fieldKey","allRowIndexes","rowIndexes","r","parseInt","Set","addError","errorsByFieldKeyByRowIndex","hasError","getErrors","applyValidation","validatorsByFieldKey","validatorDefinition","Validator","values","validators","result","computeStatistics","statisticsByFieldKey","headers","isNull","errorsByRowIndex","computeStatisticsForField","length","newFormattedData","output","item","formatData","setFormattedData","newValidationResult","setValidationResult","newStatistics","setStatistics","i","usedFilters","h","unselectedFields","filter","selectedFields","finalSelectedFields","file","Papa","skipEmptyLines","complete","newParsed","setParsed","foundField","buildSuggestedHeaderMappings","setCurrentStep","onComplete","App","ready","setReady","href","validate","regex","log","maxWidth","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a27aa8ac.chunk.js","sourcesContent":["import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TextEnd = styled.section`\n  text-align: right;\n  margin-bottom: 20px;\n`;\n\nconst BreadcrumbItem = styled.span`\n  font-weight: thin;\n  margin-left: 20px;\n  ${props => {\n    if (props.active) {\n      return css`\n        font-weight: bold;\n      `\n    }\n\n    if (props.past) {\n      return css`\n        font-weight: bold;\n        color: #2ecc71;\n      `\n    }\n  }};\n`\n\nconst Aligned = styled.svg`\n  margin-left: 20px;\n  fill: grey;\n`\n\nconst Header = ({ steps, currentStep }) => {\n  return (\n    <TextEnd id=\"csv-importer-nav-header\">\n      { steps.map((step, index) => {\n        const past = currentStep > index;\n        const active = currentStep === index;\n        const last = index === steps.length - 1;\n        return (\n          <BreadcrumbItem key={index} past={past} active={active}>\n            {step}\n            {!last && (\n              <Aligned xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" fill=\"currentColor\" className=\"bi bi-chevron-right\" viewBox=\"0 0 16 16\">\n                <path fillRule=\"evenodd\" d=\"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\" />\n              </Aligned>\n            )}\n          </BreadcrumbItem>\n        );\n      }) }\n    </TextEnd>\n  );\n};\n\nexport default Header;\n","import styled, { css, keyframes } from 'styled-components';\n\nexport const Container = styled.div`\n  margin: 0 auto;\n  max-width: 1200px;\n`\n\nexport const TextStyled = styled.div`\n  ${props => {\n    let styles = {};\n    if (props.muted) {\n      styles['color'] = \"#7f8c8d\";\n    }\n    if (props.danger) {\n      styles['color'] = \"#e74c3c\";\n    }\n    if (props.bold) {\n      styles['fontWeight'] = \"bold\";\n    }\n    return styles\n  }}\n`\nexport const Root = styled.div`\n  animation : none;\n  animation-delay : 0;\n  animation-direction : normal;\n  animation-duration : 0;\n  animation-fill-mode : none;\n  animation-iteration-count : 1;\n  animation-name : none;\n  animation-play-state : running;\n  animation-timing-function : ease;\n  backface-visibility : visible;\n  background : 0;\n  background-attachment : scroll;\n  background-clip : border-box;\n  background-color : transparent;\n  background-image : none;\n  background-origin : padding-box;\n  background-position : 0 0;\n  background-position-x : 0;\n  background-position-y : 0;\n  background-repeat : repeat;\n  background-size : auto auto;\n  border : 0;\n  border-style : none;\n  border-width : medium;\n  border-color : inherit;\n  border-bottom : 0;\n  border-bottom-color : inherit;\n  border-bottom-left-radius : 0;\n  border-bottom-right-radius : 0;\n  border-bottom-style : none;\n  border-bottom-width : medium;\n  border-collapse : separate;\n  border-image : none;\n  border-left : 0;\n  border-left-color : inherit;\n  border-left-style : none;\n  border-left-width : medium;\n  border-radius : 0;\n  border-right : 0;\n  border-right-color : inherit;\n  border-right-style : none;\n  border-right-width : medium;\n  border-spacing : 0;\n  border-top : 0;\n  border-top-color : inherit;\n  border-top-left-radius : 0;\n  border-top-right-radius : 0;\n  border-top-style : none;\n  border-top-width : medium;\n  bottom : auto;\n  box-shadow : none;\n  box-sizing : content-box;\n  caption-side : top;\n  clear : none;\n  clip : auto;\n  color : inherit;\n  columns : auto;\n  column-count : auto;\n  column-fill : balance;\n  column-gap : normal;\n  column-rule : medium none currentColor;\n  column-rule-color : currentColor;\n  column-rule-style : none;\n  column-rule-width : none;\n  column-span : 1;\n  column-width : auto;\n  content : normal;\n  counter-increment : none;\n  counter-reset : none;\n  cursor : auto;\n  direction : ltr;\n  display : inline;\n  empty-cells : show;\n  float : none;\n  font : normal;\n  font-family : inherit;\n  font-size : 16px !important;\n  font-style : normal;\n  font-variant : normal;\n  font-weight : normal;\n  height : auto;\n  hyphens : none;\n  left : auto;\n  letter-spacing : normal;\n  line-height : normal;\n  list-style : none;\n  list-style-image : none;\n  list-style-position : outside;\n  list-style-type : disc;\n  margin : 0;\n  margin-bottom : 0;\n  margin-left : 0;\n  margin-right : 0;\n  margin-top : 0;\n  max-height : none;\n  max-width : none;\n  min-height : 0;\n  min-width : 0;\n  opacity : 1;\n  orphans : 0;\n  outline : 0;\n  outline-color : invert;\n  outline-style : none;\n  outline-width : medium;\n  overflow : visible;\n  overflow-x : visible;\n  overflow-y : visible;\n  padding : 0;\n  padding-bottom : 0;\n  padding-left : 0;\n  padding-right : 0;\n  padding-top : 0;\n  page-break-after : auto;\n  page-break-before : auto;\n  page-break-inside : auto;\n  perspective : none;\n  perspective-origin : 50% 50%;\n  position : static;\n  right : auto;\n  tab-size : 8;\n  table-layout : auto;\n  text-align : inherit;\n  text-align-last : auto;\n  text-decoration : none;\n  text-decoration-color : inherit;\n  text-decoration-line : none;\n  text-decoration-style : solid;\n  text-indent : 0;\n  text-shadow : none;\n  text-transform : none;\n  top : auto;\n  transform : none;\n  transform-style : flat;\n  transition : none;\n  transition-delay : 0s;\n  transition-duration : 0s;\n  transition-property : none;\n  transition-timing-function : ease;\n  unicode-bidi : normal;\n  vertical-align : baseline;\n  visibility : visible;\n  white-space : normal;\n  widows : 0;\n  width : auto;\n  word-spacing : normal;\n  z-index : auto;\n  all: initial;\n  all: unset;\n`\n\nexport const Card = styled.div`\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  padding: 10px;\n  border-radius: 5px;\n`\n\nexport const Align = styled.div`\n${\n  props => {\n    if (props.right) {\n      return css`text-align: right`\n    } else if (props.center) {\n      return css`text-align: center`\n    }\n  }\n}\n`\n\nexport const Margin = styled.div`\n  ${\n    props => {\n      return css`\n        margin: ${props.margin};\n      `;\n    }\n  }\n`\n\nexport const Padded = styled.div`\n  ${\n    props => {\n      return css`\n        padding: ${props.padding};\n      `;\n    }\n  }\n`\n\nexport const Table = styled.table`\n  border: 1px solid #aaa;\n  width: 100%;\n  th, td {\n    border: 1px solid #aaa;\n  }\n`\n\nexport const Row = styled.div`\n  flex-direction: row;\n  display: flex;\n`\n\nexport const Col = styled.div`\n  ${props => {\n    let customCss = {};\n    if (props.flex) {\n      customCss['flex'] = props.flex;\n    } else {\n      customCss['flex'] = 1;\n    }\n    if (props.verticallyCenter) {\n      customCss['display'] = 'flex';\n      customCss['alignItems'] = 'center';\n    }\n    if (props.spaceBetween) {\n      customCss['display'] = 'flex';\n      customCss['justifyContent'] = 'space-between';\n    }\n    return customCss;\n  }}\n`\n\nexport const Button = styled.button`\n  border: none;\n  padding: 10px 20px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  cursor: pointer;\n  font-weight: bold;\n  border-radius: 5px;\n\n  ${props => {\n    let color = \"#2980b9\";\n    if (props.variant === 'success') {\n      color = 'green';\n    } else if (props.variant === 'danger') {\n      color = '#e74c3c';\n    } else if (props.variant === \"secondary\") {\n      color = '#7f8c8d';\n    } else if (props.variant === \"warning\") {\n      color = '#e67e22';\n    }\n\n    if (props.disabled) {\n      color += 'bb';\n    }\n    if (props.outline) {\n      return css`\n        border: 1px solid ${color};\n        color: ${color};\n      `;\n    } else {\n      return css`\n        color: white;\n        background-color: ${color};\n        border: 1px solid ${color};\n      `;\n    }\n  }}\n`\nconst rotate = keyframes`\n  from {\n    stroke-dashoffset: 360;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n`\n\n\nexport const CircleProgress = styled.circle`\n  stroke-dasharray: 360;\n  stroke-dashoffset: 0;\n  stroke: #2ecc71;\n  animation: ${rotate} 1s ease-out;\n\n  fill: none;\n  stroke-width: 5px;\n  stroke-linecap: round;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n  cx: 50;\n  cy: 50;\n  r: 45;\n`","import React, { useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport styled from 'styled-components'\nimport { Button, Row, Col, Align, Card, Padded, Margin, TextStyled } from './common'\n\n\nconst FileUploader = ({ setFile }) => {\n  const {acceptedFiles, getRootProps, getInputProps, isDragAccept} = useDropzone();\n\n  useEffect(() => {\n    if (acceptedFiles.length > 0) {\n      setFile(acceptedFiles[0])\n    }\n  }, [acceptedFiles]);\n  console.log(isDragAccept);\n\n  const backgroundColor = isDragAccept ? \"rgb(236, 240, 241)\" : \"rgb(250, 250, 250)\";\n  return (\n    <Card {...getRootProps()} style={{cursor: 'pointer', backgroundColor: backgroundColor}}>\n      <Padded padding=\"30px\">\n        <input {...getInputProps()} />\n        <Margin margin=\"0 0 30px 0\">\n          <TextStyled muted>\n          Pick a file\n          </TextStyled>\n        </Margin>\n        <Row>\n          <Col flex=\"3\">\n            <Row>\n              <Col flex=\"1\">\n                <svg style={{marginRight: \"20px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" fill=\"#7f8c8d\" className=\"bi bi-cloud-arrow-up\" viewBox=\"0 0 16 16\">\n                  <path fillRule=\"evenodd\" d=\"M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z\" />\n                  <path d=\"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z\" />\n                </svg>\n              </Col>\n              <Col flex=\"6\">\n                <h5 style={{marginBottom: \"10px\"}}>Drag and drop your file here</h5>\n                <TextStyled muted>Limit 20MB • CSV</TextStyled>\n              </Col>\n            </Row>\n\n          </Col>\n          <Col flex=\"1\">\n            <Align right>\n              <Button variant=\"secondary\" outline>Browse Files</Button>\n            </Align>\n          </Col>\n        </Row>\n      </Padded>\n    </Card>\n  );\n};\n\nexport default FileUploader;\n","import React from 'react';\nimport Select from 'react-select';\nimport { Card, Margin, Button, Row, Col, Padded, Table, Align } from './common'\n\nconst percentage = (a, b) => {\n  return Math.round((a / b * 100) * 10) / 10;\n}\n\nconst MappingStatistics = ({ fieldStatistics, selectedField, }) => {\n  const total = fieldStatistics.total;\n  const counts = fieldStatistics.statistics?.counts;\n  const errorTypeCounts = fieldStatistics.statistics?.errorTypeCounts;\n  if (!counts || !errorTypeCounts) {\n    return <div></div>\n  }\n  return (\n    <div>\n      {selectedField && <div>Matched to <b>{selectedField.label}</b></div>}\n      {!selectedField && <div><b>No match detected</b></div>}\n      <br />\n      <div>\n        <svg style={{ marginRight: \"10px\" }} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#7f8c8d\" className=\"bi bi-info-circle-fill\" viewBox=\"0 0 16 16\">\n          <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\" />\n        </svg>\n\n        <b>{percentage(total - counts.isNull, total)}%</b> of your rows have a value for this column\n      </div>\n      {errorTypeCounts.total === 0 && (\n        <div>\n          <svg style={{marginRight: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#2ecc71\" className=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n            <path d=\"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z\" />\n          </svg>\n\n          All rows pass validation for this column.\n        </div>\n      )}\n      {errorTypeCounts.total > 0 && (\n        <div>\n          <svg style={{marginRight: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#f39c12\" className=\"bi bi-exclamation-diamond-fill\" viewBox=\"0 0 16 16\">\n            <path d=\"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\n          </svg>\n\n          {(errorTypeCounts.total / total < 0.02) && <span><b>{errorTypeCounts.total}</b> rows fail validation (repair on next step)</span>}\n          {(errorTypeCounts.total / total >= 0.02) && <span><b>{percentage(errorTypeCounts.total, total)}%</b> of rows fail validation (repair on next step)</span>}\n        </div>\n      )}\n    </div>\n  );\n}\nconst HeaderMapperSelection = ({header, examples, setHeader, selectedHeader, options}) => {\n  return (\n    <div>\n      <Margin margin=\"20px 0\">\n        <Row>\n          <Col verticallyCenter spaceBetween>\n            <Margin margin=\"0 10px\">{header.slice(0, 30)}</Margin>\n            <Padded padding=\"0 20px\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-arrow-right\" viewBox=\"0 0 16 16\">\n              <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\" />\n            </svg>\n            </Padded>\n          </Col>\n          <Col>\n            <Select isClearable={true} isSearchable={true} value={selectedHeader} options={options} onChange={setHeader} />\n          </Col>\n        </Row>\n      </Margin>\n      <Table>\n        <tbody>\n          {examples.map((e, idx) => {\n            return (\n              <tr key={idx}>\n                <td style={{ backgroundColor: '#ecf0f1', textAlign: 'center', width: \"40px\" }}>\n                  {idx}\n                </td>\n                <td style={{ padding: '10px 20px' }}>\n                  {e || <i>No Data</i>}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n\nconst HeaderMapperRow = ({options, header, examples, headerMapping, setHeaderMapping, fieldStatistics}) => {\n  let block = null;\n  if (headerMapping.confirmed) {\n    block = (\n      <Row>\n        <Col>\n          <Row>\n            <Col verticallyCenter spaceBetween>\n              <Margin margin=\"0 10px\">{header.slice(0, 30)}</Margin>\n              <Padded padding=\"0 20px\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-arrow-right\" viewBox=\"0 0 16 16\">\n                  <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\" />\n                </svg>\n              </Padded>\n            </Col>\n            <Col>\n              <Select isDisabled={true} value={headerMapping.selectedField} />\n            </Col>\n          </Row>\n        </Col>\n        <Col spaceBetween verticallyCenter>\n          <div>\n            <svg style={{margin: \"-2px 10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#2ecc71\" className=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n              <path d=\"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z\" />\n            </svg>\n            Confirmed\n          </div>\n\n          <Button onClick={() => {\n            setHeaderMapping({\n              ...headerMapping,\n              confirmed: false,\n            })\n          }}>Edit</Button>\n        </Col>\n      </Row>\n    );\n  } else if (headerMapping.ignored) {\n    block = (\n      <Row>\n        <Col verticallyCenter>\n          <Margin margin=\"0 10px\">{ header }</Margin>\n        </Col>\n        <Col spaceBetween verticallyCenter>\n          <div>\n            <svg style={{margin: \"-2px 10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-eye-slash-fill\" viewBox=\"0 0 16 16\">\n              <path d=\"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z\" />\n              <path d=\"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z\" />\n            </svg>\n            Ignored\n          </div>\n\n          <Button onClick={() => {\n            setHeaderMapping({\n              ...headerMapping,\n              selectedField: null,\n              ignored: false,\n              name: null,\n            })\n          }}>Edit</Button>\n        </Col>\n      </Row>\n    );\n  } else {\n    block = (\n      <Row>\n        <Col>\n          <HeaderMapperSelection\n            options={options}\n            header={header}\n            examples={examples}\n            selectedHeader={headerMapping.selectedField}\n            setHeader={(selectedField) => {\n              setHeaderMapping({\n                ...headerMapping,\n                selectedField,\n                ignored: false,\n                name: header,\n              })\n            }}\n          />\n        </Col>\n        <Col>\n          <Padded\n            padding=\"20px 0 0 20px\"\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"90%\",\n              justifyContent: \"space-between\"\n            }}>\n            <div>\n              {headerMapping.selectedField && (\n                <MappingStatistics selectedField={headerMapping.selectedField} fieldStatistics={fieldStatistics} />\n              )}\n            </div>\n            <div>\n              {\n                headerMapping.selectedField && \n                <Button style={{ marginRight: '10px' }} variant=\"success\" onClick={() => {\n                  setHeaderMapping({ ...headerMapping, confirmed: true });\n                }}>Confirm mapping</Button>\n              }\n              <Button variant=\"secondary\" outline onClick={() => {\n                setHeaderMapping({ ...headerMapping, ignored: true });\n              }}>Ignore this column</Button>\n            </div>\n          </Padded>\n        </Col>\n      </Row>\n    );\n  }\n  return (\n    <Margin margin=\"20px 0\">\n      <Card>{block}</Card>\n    </Margin>\n  );\n}\nexport default HeaderMapperRow;","import React from 'react';\nimport HeaderMapperRow from './HeaderMapperRow';\nimport { Button, Align, Margin, TextStyled, Col, Row } from './common'\n\nconst HeaderMapper = ({ parsed, fields, statistics, headerMappings, setHeaderMappings, missingRequiredFields, onComplete, restart }) => {\n  const data = parsed.data;\n  const options = fields.map(f => {\n    return {\n      label: f.label,\n      value: f.key,\n    }\n  });\n\n  const hasMissingRequiredFields = missingRequiredFields.length > 0;\n\n  return (\n    <div>\n      <div>\n        <h5>{parsed.data.length - 1} Rows Imported</h5>\n      </div>\n      {\n        data[0].map((header, columnIndex) => {\n          const examples = data.slice(1, 4).map(d => d[columnIndex]);\n          const headerMapping = headerMappings[columnIndex] || {};\n          const fieldStatistics = {\n            total: statistics.total,\n            statistics: statistics.statisticsByFieldKey[headerMapping.selectedField?.value],\n          }\n          return <HeaderMapperRow\n            key={columnIndex}\n            columnIndex={columnIndex}\n            header={header}\n            examples={examples}\n            headerMapping={headerMapping}\n            setHeaderMapping={(headerMapping) => {\n              let newMappings = { ...headerMappings }\n              headerMapping.columnIndex = columnIndex;\n              newMappings[columnIndex] = headerMapping\n              setHeaderMappings(newMappings);\n            }}\n            options={options}\n            fieldStatistics={fieldStatistics}\n          />\n        })\n      }\n      <Margin margin=\"20px 0\">\n        <Align right>\n          {hasMissingRequiredFields && (\n            missingRequiredFields.map(f => {\n              return (\n                <div>\n                  <TextStyled style={{ marginBottom: \"15px\" }} danger bold>\n                    Missing mapping for {f.label}\n                    <svg style={{marginLeft: \"10px\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#e74c3c\" className=\"bi bi-exclamation-circle-fill\" viewBox=\"0 0 16 16\">\n                      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\" />\n                    </svg>\n                  </TextStyled>\n                </div>\n              );\n            })\n          )}\n        </Align>\n        <Row>\n          <Col>\n            <Button onClick={restart} outline>\n              Back\n            </Button>\n          </Col>\n          <Col>\n            <Align right>\n              <Button onClick={onComplete} variant={hasMissingRequiredFields ? \"danger\" : \"primary\"}>\n                {hasMissingRequiredFields && \"Proceed Anyways\"}\n                {!hasMissingRequiredFields && \"Review\"}\n              </Button>\n            </Align>\n          </Col>\n        </Row>\n      </Margin>\n    </div>\n  );\n};\n\nexport default HeaderMapper;\n","export const isUndefinedOrNull = (a) => {\n  return a === null || a === undefined\n}\n\nexport const isPresent = (a) => !isUndefinedOrNull(a)\n\nexport const formatData = (headerMappings, data) => {\n  const output = []\n  for (let rowIndex = 1; rowIndex < data.length; rowIndex++) {\n    const item = {}\n    const row = data[rowIndex]\n    Object.keys(headerMappings).forEach((k) => {\n      const headerMapping = headerMappings[k]\n      const columnIndex = headerMapping.columnIndex\n      if (headerMapping.selectedField) {\n        item[headerMapping.selectedField.value] = row[columnIndex]\n      }\n    })\n    item.rowIndex = rowIndex - 1\n    output.push(item)\n  }\n  return output\n}\n\nexport const buildSuggestedHeaderMappings = (fields, headers) => {\n  const headerMappings = {}\n  headers.forEach((header, columnIndex) => {\n    const foundField = fields.find((f) => {\n      const normalizedKey = f.key\n        .toLowerCase()\n        .replace('_', '')\n        .replace(' ', '')\n      const normalizedHeader = header\n        .toLowerCase()\n        .replace('_', '')\n        .replace(' ', '')\n      return normalizedKey === normalizedHeader\n    })\n\n    if (!foundField) {\n      return\n    }\n\n    headerMappings[columnIndex] = {\n      columnIndex,\n      name: header,\n      selectedField: {\n        value: foundField.key,\n        label: foundField.label\n      }\n    }\n  })\n  // create header mappings (columnIndex => {columnIndex, name: inputHeader, selectedField: {value: '', label: ''}})\n  return headerMappings\n}\n\nexport const filterEmptyRows = (formattedData) => {\n  return formattedData.filter(\n    (d) => Object.keys(d).filter((k) => k !== 'rowIndex').length > 0\n  )\n}\n\nexport const filterInvalidRows = (formattedData, validationResult) => {\n  const rowIndexesWithErrors = validationResult.rowIndexesWithErrors()\n  formattedData = formattedData.filter(\n    (row) => !rowIndexesWithErrors.has(row.rowIndex)\n  )\n  return filterEmptyRows(formattedData)\n}\n\nexport const removeTemporaryKeys = (formattedData) => {\n  formattedData.forEach((f) => {\n    delete f.rowIndex\n  })\n  return formattedData\n}\n\nexport const fieldIsRequired = (field) => {\n  if (field.validators && field.validators.length > 0) {\n    const isRequired = field.validators.find((v) => v.validate === 'required')\n    return !!isRequired\n  }\n  return false\n}\n\nexport const buildFinalData = (formattedData, validationResult) => {\n  return removeTemporaryKeys(\n    filterInvalidRows(filterEmptyRows(formattedData), validationResult)\n  )\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport {AgGridColumn, AgGridReact} from 'ag-grid-react';\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\nimport { Button, Margin, Align, Row, Col } from './common';\nimport { filterEmptyRows, isPresent } from '../utils';\n\n\nconst DataEditor = ({ formattedData, fields, onSubmit, onBack, validationResult, setRowData, statistics }) => {\n  const [gridApi, setGridApi] = useState(null);\n  const [gridColumnApi, setGridColumnApi] = useState(null);\n  const validationRef = useRef(validationResult);\n  validationRef.current = validationResult;\n\n  useEffect(() => {\n    setTimeout(() => {\n      gridApi?.redrawRows();\n    }, 0);\n  }, [validationResult]);\n\n  const onGridReady = (params) => {\n    setGridApi(params.api);\n    setGridColumnApi(params.columnApi);\n  };\n\n  const [onlyShowErrors, _setOnlyShowErrors] = useState(false);\n  const computeCellStyle = (params) => {\n    if (\n      isPresent(params.column.colDef.field) &&\n      isPresent(params.data.rowIndex) &&\n      validationRef.current.hasError(params.column.colDef.field, params.data.rowIndex)\n    ) {\n      return {\n        color: 'rgba(192, 57, 43, 1.0)',\n        backgroundColor: 'rgba(231, 76, 60, 0.3)',\n        border: '1px solid rgba(192, 57, 43, 1.0)',\n      }\n    }\n    return null;\n  }\n\n  const setOnlyShowErrors = (newValue) => {\n    _setOnlyShowErrors(newValue);\n    let newRowData;\n    if (newValue) {\n      const rowIndexesWithErrors = validationResult.rowIndexesWithErrors();\n      newRowData = formattedData.filter((_, index) => rowIndexesWithErrors.has(index));\n    } else {\n      newRowData = formattedData;\n    }\n    gridApi.setRowData(newRowData);\n  }\n\n  const onCellValueChanged = (params) => {\n    // Change the data and revalidate the entire dataset.\n    // Because some validations are global validations.\n    setRowData(params.data, params.rowIndex);\n  }\n\n  const hasData = () => {\n    return filterEmptyRows(formattedData).length > 0;\n  }\n\n  const hasErrors = Object.keys(validationResult.errorsByFieldKeyByRowIndex).length > 0\n  return (\n    <div>\n      <Margin margin=\"20px 0\">\n        {(!hasData() || hasErrors) && (\n          <div>\n            <input checked={onlyShowErrors} onChange={(e) => {\n              setOnlyShowErrors(e.target.checked);\n            }} type=\"checkbox\" name=\"row-errors\" id=\"row-errors\" />\n            <label style={{marginLeft: '10px'}} htmlFor=\"row-errors\">Only show rows with errors</label>\n          </div>\n        )}\n        {hasData() && !hasErrors && (\n          <div style={{color: \"#2ecc71\", fontWeight: \"bold\", display: \"flex\", alignItems: \"center\"}}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n              <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\" />\n            </svg>\n\n            All rows pass validation!\n          </div>\n        )}\n      </Margin>\n      <div style={{height: 500, width: '100%'}} className=\"ag-theme-alpine\">\n        <AgGridReact\n          onCellValueChanged={onCellValueChanged}\n          rowData={formattedData}\n          tooltipShowDelay={0}\n          defaultColDef={{\n            flex: 1,\n            minWidth: 100,\n            editable: true,\n          }}\n          onGridReady={onGridReady}\n        >\n          {fields.map(field => {\n            return (\n              <AgGridColumn\n                resizable={true}\n                cellStyle={computeCellStyle}\n                key={field.key}\n                headerName={field.label}\n                tooltipValueGetter={(params) => {\n                  const rowIndex = params.rowIndex;\n                  const columnName = params.colDef.field;\n\n                  if (validationRef.current.hasError(columnName, rowIndex)) {\n                    const errors = validationRef.current.getErrors(columnName, rowIndex);\n                    return errors.map(e => e.message).join(\", \");\n                  }\n                }}\n                field={field.key}\n              ></AgGridColumn>\n            );\n          })}\n        </AgGridReact>\n      </div>\n      <Margin margin=\"20px 0\">\n        <Row>\n          <Col>\n            {onBack && (\n              <Button onClick={onBack} outline>\n                Back\n              </Button>\n            )}\n          </Col>\n          <Col>\n            <Align right>\n              {hasData() && (\n                <Button onClick={onSubmit}>\n                  {validationResult.hasErrors() && \"Upload Rows Without Errors\"}\n                  {!validationResult.hasErrors() && \"Upload\"}\n                </Button>\n              )}\n            </Align>\n          </Col>\n        </Row>\n      </Margin>\n    </div>\n  );\n};\n\nexport default DataEditor;\n","import React from 'react';\nimport { CircleProgress, Margin } from './common';\n\n\nconst Completed = ({formattedData}) => {\n  return (\n    <div>\n      <Margin margin=\"60px\" style={{textAlign: 'center'}}>\n        <div style={{width: \"100px\", height: \"100px\", margin: \"0 auto\", position: \"relative\"}}>\n          <svg style={{width: \"100px\", height: \"100px\", position: \"absolute\", margin: \"auto\", top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"}} viewBox=\"0 0 100 100\">\n            <CircleProgress />\n          </svg>\n          <svg style={{position: \"absolute\", margin: \"auto\", top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"}} xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"#2ecc71\" class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n            <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"/>\n          </svg>\n        </div>\n\n        <h2>Success</h2>\n        <h3>{formattedData.length} rows processed</h3>\n      </Margin>\n    </div>\n  );\n};\n\nexport default Completed;\n","import { createContext } from 'react'\nexport const ThemeContext = createContext({\n  colors: {\n    success: '#2ecc71',\n    primary: '#3498db',\n    warning: '#f39c12',\n    danger: '#e74c3c'\n  }\n})\n","import { fieldIsRequired } from '../utils'\n\nexport class Validator {\n  constructor(definition) {\n    this.definition = definition\n  }\n\n  isValid(fieldValue, row) {\n    throw new Error('Not Implemented')\n  }\n\n  static buildFromDefinition(definition) {\n    const mapping = {\n      regex_matches: RegexValidator,\n      required: RequiredValidator,\n      unique: UniqueValidator,\n      is_integer: IntegerValidator\n    }\n    if (!(definition.validate in mapping)) {\n      throw new Error(`Missing validator for ${definition.validate}`)\n    }\n    const FoundValidator = mapping[definition.validate]\n    return new FoundValidator(definition)\n  }\n}\n\nexport class IntegerValidator extends Validator {\n  isValid(fieldValue) {\n    return {\n      valid:\n        !isNaN(fieldValue) && fieldValue !== null && fieldValue !== undefined,\n      message: this.definition.error || 'This is not a valid number',\n      errorType: 'is_integer'\n    }\n  }\n}\n\nexport class UniqueValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    this.seen = {}\n  }\n\n  isValid(fieldValue) {\n    if (fieldValue in this.seen) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is not unique',\n        errorType: 'unique'\n      }\n    }\n    this.seen[fieldValue] = true\n    return { valid: true }\n  }\n}\n\nfunction escapeStringRegExp(str) {\n  return str.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n}\n\nexport class RegexValidator extends Validator {\n  constructor(definition) {\n    super(definition)\n    if (typeof this.definition.regex === 'object') {\n      this.regexp = this.definition.regex\n    } else {\n      this.regexp = new RegExp(escapeStringRegExp(this.definition.regex))\n    }\n    this.seen = {}\n  }\n\n  isValid(fieldValue) {\n    const matches = this.regexp.test(fieldValue)\n    if (!matches) {\n      return {\n        valid: false,\n        message: 'This value is invalid' || this.definition.error,\n        errorType: 'regex'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class RequiredValidator extends Validator {\n  isValid(fieldValue) {\n    if (!fieldValue) {\n      return {\n        valid: false,\n        message: this.definition.error || 'This value is required',\n        errorType: 'required'\n      }\n    }\n    return { valid: true }\n  }\n}\n\nexport class ValidationResult {\n  constructor() {\n    this.errorsByFieldKeyByRowIndex = {}\n  }\n\n  hasErrors() {\n    return (\n      Object.keys(this.errorsByFieldKeyByRowIndex).filter((fieldKey) => {\n        return Object.keys(this.errorsByFieldKeyByRowIndex[fieldKey]).length > 0\n      }).length > 0\n    )\n  }\n\n  rowIndexesWithErrors() {\n    let allRowIndexes = []\n    Object.keys(this.errorsByFieldKeyByRowIndex).forEach((fieldKey) => {\n      const rowIndexes = Object.keys(this.errorsByFieldKeyByRowIndex[fieldKey])\n      allRowIndexes = allRowIndexes.concat(\n        rowIndexes.map((r) => parseInt(r, 10))\n      )\n    })\n    return new Set(allRowIndexes)\n  }\n\n  addError(fieldKey, rowIndex, error) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    if (!(fieldKey in this.errorsByFieldKeyByRowIndex)) {\n      this.errorsByFieldKeyByRowIndex[fieldKey] = {}\n    }\n    if (!(rowIndex in this.errorsByFieldKeyByRowIndex[fieldKey])) {\n      this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex] = []\n    }\n    this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex].push(error)\n  }\n\n  hasError(fieldKey, rowIndex) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    return (\n      fieldKey in this.errorsByFieldKeyByRowIndex &&\n      rowIndex in this.errorsByFieldKeyByRowIndex[fieldKey]\n    )\n  }\n\n  getErrors(fieldKey, rowIndex) {\n    fieldKey = fieldKey.toString()\n    rowIndex = rowIndex.toString()\n    return this.errorsByFieldKeyByRowIndex[fieldKey][rowIndex]\n  }\n}\n\nconst hasData = (row) => {\n  const data = { ...row }\n  delete data.rowIndex;\n  const values = Object.values(data);\n  return values.length > 0;\n}\n\nexport const applyValidation = (formattedData, fields) => {\n  const validatorsByFieldKey = {}\n  fields.forEach((field) => {\n    validatorsByFieldKey[field.key] = []\n    if (!field.validators) {\n      return\n    }\n\n    field.validators.forEach((validatorDefinition) => {\n      validatorsByFieldKey[field.key].push(\n        Validator.buildFromDefinition(validatorDefinition)\n      )\n    })\n  })\n\n  const validationResult = new ValidationResult()\n  fields.forEach((field) => {\n    formattedData.forEach((row, rowIndex) => {\n      if (!hasData(row)) {\n        return;\n      }\n      if (!(field.key in row) && !fieldIsRequired(field)) {\n        return\n      }\n      const value = row[field.key]\n      const validators = validatorsByFieldKey[field.key]\n\n      validators.forEach((v) => {\n        const result = v.isValid(value)\n        if (!result.valid) {\n          validationResult.addError(field.key, rowIndex, result)\n        }\n      })\n    })\n  })\n  return validationResult\n}\n\nconst computeStatisticsForField = (\n  fieldKey,\n  formattedData,\n  errorsByRowIndex\n) => {\n  const errorTypeCounts = { total: 0 }\n  const counts = { isNull: 0 }\n  formattedData.forEach((d) => {\n    if (!d[fieldKey]) {\n      counts.isNull += 1\n    }\n  })\n\n  Object.keys(errorsByRowIndex).forEach((rowIndex) => {\n    const errors = errorsByRowIndex[rowIndex]\n    if (errors && errors.length > 0) {\n      errorTypeCounts.total += 1\n    }\n    errors.forEach((error) => {\n      if (error.errorType in errorTypeCounts) {\n        errorTypeCounts[error.errorType] += 1\n      } else {\n        errorTypeCounts[error.errorType] = 1\n      }\n    })\n  })\n  return { errorTypeCounts, counts }\n}\n\nexport const computeStatistics = (\n  formattedData,\n  headerMappings,\n  validationResult\n) => {\n  const statisticsByFieldKey = {}\n  const headers = Object.keys(headerMappings).map((k) => headerMappings[k])\n  headers.forEach((headerMapping) => {\n    if (!headerMapping.selectedField) {\n      return\n    }\n    const fieldKey = headerMapping.selectedField.value\n    statisticsByFieldKey[fieldKey] = computeStatisticsForField(\n      fieldKey,\n      formattedData,\n      validationResult.errorsByFieldKeyByRowIndex[fieldKey] || {}\n    )\n  })\n  return { statisticsByFieldKey, total: formattedData.length }\n}\n","import React, { useEffect, useState } from 'react'\nimport Papa from 'papaparse'\nimport Header from './components/Header'\nimport FileUploader from './components/FileUploader'\nimport HeaderMapper from './components/HeaderMapper'\nimport DataEditor from './components/DataEditor'\nimport Completed from './components/Completed'\nimport {\n  fieldIsRequired,\n  formatData,\n  buildSuggestedHeaderMappings,\n  buildFinalData\n} from './utils'\nimport { ThemeContext } from './contexts'\nimport { Root, Margin, Container } from './components/common'\nimport {\n  applyValidation,\n  computeStatistics,\n  ValidationResult\n} from './validators'\n\nconst Importer = ({ theme, onComplete, fields }) => {\n  const [currentStep, setCurrentStep] = useState(0)\n  const [parsed, setParsed] = useState(null)\n  const [formattedData, setFormattedData] = useState([])\n  const [statistics, setStatistics] = useState({\n    statisticsByFieldKey: {},\n    total: null\n  })\n  const [headerMappings, setHeaderMappings] = useState({})\n  const [validationResult, setValidationResult] = useState(\n    new ValidationResult()\n  )\n\n  const restart = () => {\n    setCurrentStep(0)\n    setParsed(null)\n    setFormattedData([])\n    setStatistics({ statisticsByFieldKey: {}, total: null })\n    setHeaderMappings({})\n    setValidationResult(new ValidationResult())\n  }\n\n  const setFile = (file) => {\n    Papa.parse(file, {\n      skipEmptyLines: true,\n      complete: (newParsed) => {\n        setParsed(newParsed)\n        setHeaderMappings(buildSuggestedHeaderMappings(fields, newParsed.data[0]))\n        setCurrentStep(1)\n      }\n    })\n  }\n\n  useEffect(() => {\n    if (parsed && parsed.data) {\n      const newFormattedData = formatData(headerMappings, parsed.data)\n      setFormattedData(newFormattedData)\n    }\n  }, [headerMappings])\n\n  useEffect(() => {\n    if (formattedData.length > 0) {\n      const newValidationResult = applyValidation(formattedData, fields)\n      setValidationResult(newValidationResult)\n      const newStatistics = computeStatistics(\n        formattedData,\n        headerMappings,\n        newValidationResult\n      )\n      setStatistics(newStatistics)\n    }\n  }, [formattedData])\n\n  const rowData = []\n  for (let i = 0; i < 100; i++) {\n    rowData.push({ rowIndex: i })\n  }\n\n  const usedFilters = Object.keys(headerMappings)\n    .map((h) => headerMappings[h])\n    .filter((h) => !h.ignored && h.selectedField)\n    .map((h) => h.selectedField.value)\n\n  const unselectedFields = fields.filter((filter) => {\n    return usedFilters.indexOf(filter.key) < 0\n  })\n\n  const headers = Object.keys(headerMappings)\n    .map((h) => headerMappings[h])\n    .filter((h) => h.confirmed)\n    .map((h) => h.selectedField.value)\n\n  const selectedFields = fields.filter((f) => {\n    return headers.indexOf(f.key) >= 0\n  })\n\n  const missingRequiredFields = fields\n    .filter((f) => fieldIsRequired(f))\n    .filter((f) => {\n      return selectedFields.map((f) => f.key).indexOf(f.key) === -1\n    })\n\n  const finalSelectedFields = fields.filter((f) => {\n    return headers.indexOf(f.key) >= 0 || fieldIsRequired(f)\n  })\n\n  return (\n    <ThemeContext.Provider>\n      <Root>\n        <Container>\n          <Header\n            steps={['Upload', 'Match', 'Review', 'Complete']}\n            currentStep={currentStep}\n          />\n          {currentStep === 0 && (\n            <div>\n              <FileUploader setFile={setFile} />\n              <Margin margin='40px 0 10px 0'>\n                <h6>Or just manually enter your data</h6>\n              </Margin>\n              <DataEditor\n                statistics={statistics}\n                formattedData={\n                  formattedData.length > 0 ? formattedData : rowData\n                }\n                fields={fields}\n                headerMappings={headerMappings}\n                validationResult={validationResult}\n                onSubmit={() => {\n                  onComplete(buildFinalData(formattedData, validationResult))\n                }}\n                setRowData={(row, index) => {\n                  const newRowData = [...rowData]\n                  newRowData[index] = row\n                  setFormattedData(newRowData)\n                }}\n              />\n            </div>\n          )}\n          {currentStep === 1 && (\n            <HeaderMapper\n              statistics={statistics}\n              parsed={parsed}\n              fields={unselectedFields}\n              headerMappings={headerMappings}\n              missingRequiredFields={missingRequiredFields}\n              setHeaderMappings={setHeaderMappings}\n              restart={restart}\n              onComplete={() => {\n                setCurrentStep(2)\n              }}\n            />\n          )}\n          {currentStep === 2 && (\n            <DataEditor\n              statistics={statistics}\n              formattedData={formattedData}\n              fields={finalSelectedFields}\n              headerMappings={headerMappings}\n              validationResult={validationResult}\n              onBack={() => {\n                setCurrentStep(1)\n              }}\n              onSubmit={() => {\n                onComplete(buildFinalData(formattedData, validationResult))\n                setCurrentStep(3);\n              }}\n              setRowData={(row, index) => {\n                const newFormattedData = [...formattedData]\n                newFormattedData[index] = row\n                setFormattedData(newFormattedData)\n              }}\n            />\n          )}\n          {currentStep === 3 && (\n            <Completed formattedData={formattedData} />\n          )}\n        </Container>\n      </Root>\n    </ThemeContext.Provider>\n  )\n}\n\nexport default Importer\n","import React, { useState } from 'react';\nimport Importer from 'react-importer'\n\nimport 'jsoneditor-react/es/editor.min.css';\nimport 'react-importer/dist/index.css'\n\nconst App = () => {\n  const [ready, setReady] = useState(false);\n  const onComplete = (data) => {\n    console.log(data);\n    setReady(true);\n  }\n  const content = `import Importer from 'react-importer'\n\n<Importer\n  fields={[\n    {\n      label: \"Name\", key: \"name\", validators: [\n        { validate: \"required\" },\n      ]\n    },\n    {\n      label: \"Email\", key: \"email\", validators: [\n        { validate: \"required\" },\n        { validate: \"unique\", error: \"This email is not unique\" },\n      ]\n    },\n    { label: \"State\", key: \"state\" },\n  ]}\n  onComplete={(data) => {\n    console.log(data)\n  }}\n/>`\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"header\">\n          <div className=\"main\">\n            <svg style={{marginRight: '20px'}} xmlns=\"http://www.w3.org/2000/svg\" width=\"58\" height=\"58\" fill=\"#3498db\" className=\"bi bi-file-spreadsheet\" viewBox=\"0 0 16 16\">\n              <path d=\"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707L6.354 9.854z\" />\n            </svg>\n            React Importer\n          </div>\n          <div className=\"subtext\">A modern CSV importer in React.</div>\n        </div>\n\n        <div className=\"content\">\n          <h1>Building a CSV uploader is hard.</h1>\n          <p>Tired of people uploading invalid data into your application? Or writing custom import scripts that keep breaking?</p>\n          <p><b>React Importer</b> solves that for you.</p>\n        </div>\n\n        <div className=\"content\">\n          <h1>Drop in an uploader into your app in seconds.</h1>\n          <div>\n            <pre>\n              <code className=\"language-jsx\">\n                {content}\n              </code>\n            </pre>\n          </div>\n        </div>\n\n        <div className=\"content\">\n          <h1>Want to see a demo? Try uploading <a href=\"data.csv\">this file</a>.</h1>\n          <Importer\n            fields={[\n              {\n                label: \"Name\", key: \"name\", validators: [\n                  { validate: \"required\" },\n                ]\n              },\n              {\n                label: \"Email\", key: \"email\", validators: [\n                  { validate: \"required\" },\n                  { validate: \"unique\", error: \"This email is not unique\" },\n                  {\n                    validate: \"regex_matches\",\n                    regex: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                  },\n                ]\n              },\n              {\n                label: \"Phone Number\", key: \"phone_number\", validators: [\n                  { validate: \"required\" },\n                ]\n              },\n              { label: \"City\", key: \"city\" },\n              { label: \"State\", key: \"state\" },\n            ]}\n            onComplete={onComplete}\n          />\n          {ready && (\n            <div style={{ margin: \"0 auto\", maxWidth: \"1200px\" }}>\n              <h4>Check the console for the output!</h4>\n            </div>\n          )}\n        </div>\n\n      </div>\n      <footer>\n        <div className=\"container\">\n          <p><i>\"I'm so sick of building CSV importers\"</i></p>\n          <p>- Me</p>\n        </div>\n      </footer>\n    </div>\n  )\n};\n\nexport default App;\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}